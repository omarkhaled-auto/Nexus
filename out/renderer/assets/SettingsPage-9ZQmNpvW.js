import { c as createLucideIcon, r as reactExports, a9 as useSettings, aa as useSettingsLoading, ab as useSettingsDirty, ac as useSettingsStore, j as jsxRuntimeExports, C as CircleAlert, H as Button, a as cn, S as Sparkles, B as Bot, ad as Terminal, s as Card, v as CardHeader, w as CardTitle, ae as CardDescription, x as CardContent, af as useHasApiKey, ag as EyeOff, Q as Eye, g as ChevronDown } from "./index-BoQyQ-ap.js";
import { H as Header } from "./Header-UVvTDEGF.js";
import { R as RotateCcw } from "./rotate-ccw-Br1wug3C.js";
import { S as Save, C as Cpu } from "./save-DEGhM12x.js";
import { C as CircleCheckBig } from "./circle-check-big-B_n4a8JE.js";
import { I as Info } from "./info-BHJvML7t.js";
import "./arrow-left-SdQ-w_nS.js";
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$6 = [["path", { d: "m18 15-6-6-6 6", key: "153udz" }]];
const ChevronUp = createLucideIcon("chevron-up", __iconNode$6);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$5 = [
  ["path", { d: "M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z", key: "p7xjir" }]
];
const Cloud = createLucideIcon("cloud", __iconNode$5);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$4 = [
  [
    "path",
    {
      d: "M10.3 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.98a2 2 0 0 1 1.69.9l.66 1.2A2 2 0 0 0 12 6h8a2 2 0 0 1 2 2v3.3",
      key: "128dxu"
    }
  ],
  ["path", { d: "m14.305 19.53.923-.382", key: "3m78fa" }],
  ["path", { d: "m15.228 16.852-.923-.383", key: "npixar" }],
  ["path", { d: "m16.852 15.228-.383-.923", key: "5xggr7" }],
  ["path", { d: "m16.852 20.772-.383.924", key: "dpfhf9" }],
  ["path", { d: "m19.148 15.228.383-.923", key: "1reyyz" }],
  ["path", { d: "m19.53 21.696-.382-.924", key: "1goivc" }],
  ["path", { d: "m20.772 16.852.924-.383", key: "htqkph" }],
  ["path", { d: "m20.772 19.148.924.383", key: "9w9pjp" }],
  ["circle", { cx: "18", cy: "18", r: "3", key: "1xkwt0" }]
];
const FolderCog = createLucideIcon("folder-cog", __iconNode$4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$3 = [
  ["rect", { width: "20", height: "14", x: "2", y: "3", rx: "2", key: "48i651" }],
  ["line", { x1: "8", x2: "16", y1: "21", y2: "21", key: "1svkeh" }],
  ["line", { x1: "12", x2: "12", y1: "17", y2: "21", key: "vw1qmm" }]
];
const Monitor = createLucideIcon("monitor", __iconNode$3);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$2 = [
  [
    "path",
    {
      d: "M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",
      key: "kfwtm"
    }
  ]
];
const Moon = createLucideIcon("moon", __iconNode$2);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1 = [
  ["path", { d: "M14 17H5", key: "gfn3mx" }],
  ["path", { d: "M19 7h-9", key: "6i9tg" }],
  ["circle", { cx: "17", cy: "17", r: "3", key: "18b49y" }],
  ["circle", { cx: "7", cy: "7", r: "3", key: "dfmy0x" }]
];
const Settings2 = createLucideIcon("settings-2", __iconNode$1);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode = [
  ["circle", { cx: "12", cy: "12", r: "4", key: "4exip2" }],
  ["path", { d: "M12 2v2", key: "tus03m" }],
  ["path", { d: "M12 20v2", key: "1lh1kg" }],
  ["path", { d: "m4.93 4.93 1.41 1.41", key: "149t6j" }],
  ["path", { d: "m17.66 17.66 1.41 1.41", key: "ptbguv" }],
  ["path", { d: "M2 12h2", key: "1t8f8n" }],
  ["path", { d: "M20 12h2", key: "1q8mjw" }],
  ["path", { d: "m6.34 17.66-1.41 1.41", key: "1m8zz5" }],
  ["path", { d: "m19.07 4.93-1.41 1.41", key: "1shlcs" }]
];
const Sun = createLucideIcon("sun", __iconNode);
const CLAUDE_MODELS = {
  // === Claude 4.5 Family (LATEST) ===
  "claude-opus-4-5-20251101": {
    id: "claude-opus-4-5-20251101",
    name: "Claude Opus 4.5",
    contextWindow: 2e5,
    description: "Most intelligent - Best for complex coding, agents, and sophisticated tasks",
    released: "2025-11-24"
  },
  "claude-sonnet-4-5-20250929": {
    id: "claude-sonnet-4-5-20250929",
    name: "Claude Sonnet 4.5",
    contextWindow: 2e5,
    // 1M with beta header
    description: "Best balance of speed and intelligence - Recommended for most tasks",
    released: "2025-09-29",
    isDefault: true
  },
  "claude-haiku-4-5-20251001": {
    id: "claude-haiku-4-5-20251001",
    name: "Claude Haiku 4.5",
    contextWindow: 2e5,
    description: "Fast and lightweight - Best for simple tasks and high volume",
    released: "2025-10-15"
  },
  // === Claude 4.x Family ===
  "claude-opus-4-1-20250805": {
    id: "claude-opus-4-1-20250805",
    name: "Claude Opus 4.1",
    contextWindow: 2e5,
    description: "Previous Opus - Strong coding and agentic capabilities",
    released: "2025-08-05"
  },
  "claude-sonnet-4-20250514": {
    id: "claude-sonnet-4-20250514",
    name: "Claude Sonnet 4",
    contextWindow: 2e5,
    description: "Previous Sonnet - Good all-around performance",
    released: "2025-05-22"
  }
};
const DEFAULT_CLAUDE_MODEL = "claude-sonnet-4-5-20250929";
const GEMINI_MODELS = {
  // === Gemini 3 Family (LATEST) ===
  "gemini-3-pro": {
    id: "gemini-3-pro",
    name: "Gemini 3 Pro",
    contextWindow: 1e6,
    description: "Most powerful reasoning model - Best for complex analysis",
    released: "2025-11-18"
  },
  "gemini-3-flash": {
    id: "gemini-3-flash",
    name: "Gemini 3 Flash",
    contextWindow: 1e6,
    description: "Fast with PhD-level reasoning - New default in Gemini app",
    released: "2025-12-17"
  },
  // === Gemini 2.5 Family (Stable/GA) ===
  "gemini-2.5-pro": {
    id: "gemini-2.5-pro",
    name: "Gemini 2.5 Pro",
    contextWindow: 1e6,
    description: "Advanced reasoning with thinking - Stable release",
    released: "2025-06-26"
  },
  "gemini-2.5-flash": {
    id: "gemini-2.5-flash",
    name: "Gemini 2.5 Flash",
    contextWindow: 1e6,
    description: "Fast and capable - Best balance for production use",
    released: "2025-06-17",
    isDefault: true
  },
  "gemini-2.5-flash-lite": {
    id: "gemini-2.5-flash-lite",
    name: "Gemini 2.5 Flash-Lite",
    contextWindow: 1e6,
    description: "Cost-optimized - Best for high-volume tasks",
    released: "2025-07-29"
  }
};
const DEFAULT_GEMINI_MODEL = "gemini-2.5-flash";
const LOCAL_EMBEDDING_MODELS = {
  "Xenova/all-MiniLM-L6-v2": {
    id: "Xenova/all-MiniLM-L6-v2",
    name: "MiniLM L6 v2",
    dimensions: 384,
    description: "Fast, lightweight - Best for most use cases",
    isDefault: true
  },
  "Xenova/all-mpnet-base-v2": {
    id: "Xenova/all-mpnet-base-v2",
    name: "MPNet Base v2",
    dimensions: 768,
    description: "Higher quality - Larger model"
  },
  "Xenova/bge-small-en-v1.5": {
    id: "Xenova/bge-small-en-v1.5",
    name: "BGE Small English",
    dimensions: 384,
    description: "Optimized for retrieval tasks"
  },
  "Xenova/bge-base-en-v1.5": {
    id: "Xenova/bge-base-en-v1.5",
    name: "BGE Base English",
    dimensions: 768,
    description: "Higher quality BGE model"
  }
};
const DEFAULT_LOCAL_EMBEDDING_MODEL = "Xenova/all-MiniLM-L6-v2";
function getClaudeModelList() {
  return Object.values(CLAUDE_MODELS).filter((m) => !m.deprecated);
}
function getGeminiModelList() {
  return Object.values(GEMINI_MODELS).filter((m) => !m.deprecated);
}
function getLocalEmbeddingModelList() {
  return Object.values(LOCAL_EMBEDDING_MODELS);
}
const DEFAULT_AGENT_MODEL_ASSIGNMENTS = {
  planner: { provider: "claude", model: "claude-opus-4-5-20251101" },
  coder: { provider: "claude", model: "claude-sonnet-4-5-20250929" },
  tester: { provider: "claude", model: "claude-sonnet-4-5-20250929" },
  reviewer: { provider: "gemini", model: "gemini-2.5-pro" },
  merger: { provider: "claude", model: "claude-sonnet-4-5-20250929" },
  architect: { provider: "claude", model: "claude-opus-4-5-20251101" },
  debugger: { provider: "claude", model: "claude-sonnet-4-5-20250929" },
  documenter: { provider: "gemini", model: "gemini-2.5-flash" }
};
const isElectronEnvironment = () => {
  return typeof window !== "undefined" && typeof window.nexusAPI !== "undefined";
};
const tabs = [
  { id: "llm", label: "LLM Providers", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Sparkles, { className: "w-4 h-4" }), description: "Backend selection, models, and API keys" },
  { id: "agents", label: "Agents", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Bot, { className: "w-4 h-4" }), description: "Agent model assignments and limits" },
  { id: "checkpoints", label: "Checkpoints", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Save, { className: "w-4 h-4" }), description: "Auto-checkpoint settings" },
  { id: "ui", label: "UI", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Settings2, { className: "w-4 h-4" }), description: "Interface preferences" },
  { id: "project", label: "Projects", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(FolderCog, { className: "w-4 h-4" }), description: "Default project settings" }
];
function Input({ className, label, description, id, ...props }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
    label && /* @__PURE__ */ jsxRuntimeExports.jsx("label", { htmlFor: id, className: "text-sm font-medium text-text-primary leading-none", children: label }),
    description && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-text-secondary", children: description }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      "input",
      {
        id,
        className: cn(
          "flex h-10 w-full rounded-md border border-border-default bg-bg-dark px-3 py-2 text-sm text-text-primary",
          "placeholder:text-text-tertiary",
          "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-accent-primary",
          "disabled:cursor-not-allowed disabled:opacity-50",
          "transition-colors",
          className
        ),
        ...props
      }
    )
  ] });
}
function Select({ className, label, description, id, options, ...props }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
    label && /* @__PURE__ */ jsxRuntimeExports.jsx("label", { htmlFor: id, className: "text-sm font-medium text-text-primary leading-none", children: label }),
    description && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-text-secondary", children: description }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      "select",
      {
        id,
        className: cn(
          "flex h-10 w-full rounded-md border border-border-default bg-bg-dark px-3 py-2 text-sm text-text-primary",
          "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-accent-primary",
          "disabled:cursor-not-allowed disabled:opacity-50",
          "transition-colors",
          className
        ),
        ...props,
        children: options.map((opt) => /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: opt.value, children: opt.label }, opt.value))
      }
    )
  ] });
}
function Checkbox({ className, label, description, id, ...props }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start space-x-3", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      "input",
      {
        type: "checkbox",
        id,
        className: cn(
          "h-4 w-4 rounded border border-border-default bg-bg-dark mt-0.5",
          "text-accent-primary",
          "focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-bg-dark",
          "disabled:cursor-not-allowed disabled:opacity-50",
          className
        ),
        ...props
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-1", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("label", { htmlFor: id, className: "text-sm font-medium text-text-primary leading-none cursor-pointer", children: label }),
      description && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-text-secondary", children: description })
    ] })
  ] });
}
function BackendToggle({ label, value, options, onChange, status }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-text-primary", children: label }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "inline-flex rounded-md border border-border-default p-1 bg-bg-dark", children: options.map((option) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
        "button",
        {
          type: "button",
          onClick: () => {
            onChange(option.value);
          },
          className: cn(
            "flex items-center gap-2 px-3 py-1.5 rounded text-sm font-medium transition-all",
            value === option.value ? "bg-accent-primary text-white shadow-sm" : "text-text-secondary hover:text-text-primary hover:bg-bg-hover"
          ),
          "data-testid": `backend-toggle-${option.value}`,
          children: [
            option.icon,
            option.label
          ]
        },
        option.value
      )) }),
      status && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: cn(
        "flex items-center gap-1.5 text-xs",
        status.detected ? "text-accent-success" : "text-text-tertiary"
      ), children: [
        status.detected ? /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "w-3.5 h-3.5" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { className: "w-3.5 h-3.5" }),
        status.message
      ] })
    ] })
  ] });
}
function ModelDropdown({ label, value, models, onChange, description: _description }) {
  const selectedModel = models.find((m) => m.id === value);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-text-primary", children: label }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      "select",
      {
        value,
        onChange: (e) => {
          onChange(e.target.value);
        },
        className: cn(
          "flex h-10 w-full rounded-md border border-border-default bg-bg-dark px-3 py-2 text-sm text-text-primary",
          "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-accent-primary",
          "transition-colors cursor-pointer"
        ),
        "data-testid": "model-dropdown",
        children: models.map((model) => /* @__PURE__ */ jsxRuntimeExports.jsxs("option", { value: model.id, children: [
          model.name,
          " ",
          model.isDefault ? "(Recommended)" : ""
        ] }, model.id))
      }
    ),
    selectedModel?.description && /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-text-secondary flex items-center gap-1.5", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Info, { className: "w-3 h-3" }),
      selectedModel.description
    ] })
  ] });
}
function ApiKeyInput({ provider, label, optional = false }) {
  const [value, setValue] = reactExports.useState("");
  const [show, setShow] = reactExports.useState(false);
  const [saving, setSaving] = reactExports.useState(false);
  const hasKey = useHasApiKey(provider);
  const { setApiKey, clearApiKey } = useSettingsStore();
  const handleSave = async () => {
    if (!value.trim()) return;
    setSaving(true);
    try {
      const success = await setApiKey(provider, value.trim());
      if (success) {
        setValue("");
        setShow(false);
      }
    } finally {
      setSaving(false);
    }
  };
  const handleClear = async () => {
    setSaving(true);
    try {
      await clearApiKey(provider);
    } finally {
      setSaving(false);
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-2", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("label", { className: "text-sm font-medium text-text-primary", children: label }),
      optional && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-text-tertiary", children: "(optional for CLI)" })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative flex-1", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "input",
          {
            type: show ? "text" : "password",
            value,
            onChange: (e) => {
              setValue(e.target.value);
            },
            placeholder: hasKey ? "â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" : "Enter API key",
            disabled: saving,
            className: cn(
              "flex h-10 w-full rounded-md border border-border-default bg-bg-dark px-3 py-2 pr-10 text-sm text-text-primary",
              "placeholder:text-text-tertiary",
              "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-accent-primary",
              "disabled:cursor-not-allowed disabled:opacity-50",
              "transition-colors",
              hasKey && !value && "border-accent-success/50"
            ),
            "data-testid": `api-key-input-${provider}`
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          "button",
          {
            type: "button",
            onClick: () => {
              setShow(!show);
            },
            className: "absolute right-2 top-1/2 -translate-y-1/2 text-text-tertiary hover:text-text-primary transition-colors",
            "data-testid": `toggle-visibility-${provider}`,
            children: show ? /* @__PURE__ */ jsxRuntimeExports.jsx(EyeOff, { className: "w-4 h-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Eye, { className: "w-4 h-4" })
          }
        )
      ] }),
      value && /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { onClick: () => {
        void handleSave();
      }, disabled: saving, size: "sm", "data-testid": `save-key-${provider}`, children: saving ? "Saving..." : "Save" }),
      hasKey && !value && /* @__PURE__ */ jsxRuntimeExports.jsx(Button, { onClick: () => {
        void handleClear();
      }, disabled: saving, variant: "destructive", size: "sm", "data-testid": `clear-key-${provider}`, children: "Clear" })
    ] }),
    hasKey && /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-xs text-accent-success flex items-center gap-1.5", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "w-3 h-3" }),
      "API key is securely stored"
    ] })
  ] });
}
function AdvancedSection({ title, children, defaultOpen = false }) {
  const [isOpen, setIsOpen] = reactExports.useState(defaultOpen);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "border-t border-border-default pt-4 mt-4", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        type: "button",
        onClick: () => {
          setIsOpen(!isOpen);
        },
        className: "flex items-center gap-2 text-sm font-medium text-text-secondary hover:text-text-primary transition-colors w-full",
        "data-testid": "advanced-toggle",
        children: [
          isOpen ? /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronUp, { className: "w-4 h-4" }) : /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronDown, { className: "w-4 h-4" }),
          title
        ]
      }
    ),
    isOpen && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-4 space-y-4 pl-6 animate-in fade-in slide-in-from-top-2 duration-200", children })
  ] });
}
function ProviderCard({ title, icon, children }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(CardHeader, { className: "pb-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center gap-2 text-base", children: [
      icon,
      title
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "space-y-4", children })
  ] });
}
function LLMProvidersSettings({ settings, updateSetting }) {
  const claudeModels = getClaudeModelList();
  const geminiModels = getGeminiModelList();
  const localEmbeddingModels = getLocalEmbeddingModelList();
  const [claudeCliStatus, setClaudeCliStatus] = reactExports.useState({ detected: false, message: "Checking..." });
  const [geminiCliStatus, setGeminiCliStatus] = reactExports.useState({ detected: false, message: "Checking..." });
  reactExports.useEffect(() => {
    if (!window.nexusAPI?.settings?.checkCliAvailability) {
      setClaudeCliStatus({ detected: false, message: "Backend not available" });
      setGeminiCliStatus({ detected: false, message: "Backend not available" });
      return;
    }
    window.nexusAPI.settings.checkCliAvailability("claude").then(setClaudeCliStatus).catch((err) => {
      console.error("Failed to check Claude CLI:", err);
      setClaudeCliStatus({ detected: false, message: "Check failed" });
    });
    window.nexusAPI.settings.checkCliAvailability("gemini").then(setGeminiCliStatus).catch((err) => {
      console.error("Failed to check Gemini CLI:", err);
      setGeminiCliStatus({ detected: false, message: "Check failed" });
    });
  }, []);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", "data-testid": "llm-providers-tab", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      ProviderCard,
      {
        title: "Claude Configuration",
        icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Sparkles, { className: "w-5 h-5 text-accent-primary" }),
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            BackendToggle,
            {
              label: "Backend",
              value: settings.llm.claude.backend,
              options: [
                { value: "cli", label: "CLI", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Terminal, { className: "w-4 h-4" }) },
                { value: "api", label: "API", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Cloud, { className: "w-4 h-4" }) }
              ],
              onChange: (value) => {
                updateSetting("llm", "claude", { ...settings.llm.claude, backend: value });
              },
              status: claudeCliStatus
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ModelDropdown,
            {
              label: "Model",
              value: settings.llm.claude.model || DEFAULT_CLAUDE_MODEL,
              models: claudeModels,
              onChange: (value) => {
                updateSetting("llm", "claude", { ...settings.llm.claude, model: value });
              }
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ApiKeyInput,
            {
              provider: "claude",
              label: "API Key",
              optional: settings.llm.claude.backend === "cli"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(AdvancedSection, { title: "Advanced", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "claude-timeout",
                type: "number",
                min: 3e4,
                max: 6e5,
                step: 1e4,
                label: "Timeout (ms)",
                description: "Request timeout in milliseconds",
                value: settings.llm.claude.timeout || 3e5,
                onChange: (e) => {
                  updateSetting("llm", "claude", {
                    ...settings.llm.claude,
                    timeout: parseInt(e.target.value) || 3e5
                  });
                }
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Input,
              {
                id: "claude-retries",
                type: "number",
                min: 0,
                max: 5,
                label: "Max Retries",
                description: "Maximum number of retry attempts",
                value: settings.llm.claude.maxRetries || 2,
                onChange: (e) => {
                  updateSetting("llm", "claude", {
                    ...settings.llm.claude,
                    maxRetries: parseInt(e.target.value) || 2
                  });
                }
              }
            )
          ] }) })
        ] })
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      ProviderCard,
      {
        title: "Gemini Configuration",
        icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Sparkles, { className: "w-5 h-5 text-accent-secondary" }),
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            BackendToggle,
            {
              label: "Backend",
              value: settings.llm.gemini.backend,
              options: [
                { value: "cli", label: "CLI", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Terminal, { className: "w-4 h-4" }) },
                { value: "api", label: "API", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Cloud, { className: "w-4 h-4" }) }
              ],
              onChange: (value) => {
                updateSetting("llm", "gemini", { ...settings.llm.gemini, backend: value });
              },
              status: geminiCliStatus
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ModelDropdown,
            {
              label: "Model",
              value: settings.llm.gemini.model || DEFAULT_GEMINI_MODEL,
              models: geminiModels,
              onChange: (value) => {
                updateSetting("llm", "gemini", { ...settings.llm.gemini, model: value });
              }
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            ApiKeyInput,
            {
              provider: "gemini",
              label: "API Key",
              optional: settings.llm.gemini.backend === "cli"
            }
          )
        ] })
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      ProviderCard,
      {
        title: "Embeddings Configuration",
        icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Cpu, { className: "w-5 h-5 text-accent-success" }),
        children: /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            BackendToggle,
            {
              label: "Backend",
              value: settings.llm.embeddings.backend,
              options: [
                { value: "local", label: "Local", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Cpu, { className: "w-4 h-4" }) },
                { value: "api", label: "OpenAI API", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Cloud, { className: "w-4 h-4" }) }
              ],
              onChange: (value) => {
                updateSetting("llm", "embeddings", { ...settings.llm.embeddings, backend: value });
              },
              status: settings.llm.embeddings.backend === "local" ? { detected: true, message: "No API key needed" } : void 0
            }
          ),
          settings.llm.embeddings.backend === "local" && /* @__PURE__ */ jsxRuntimeExports.jsx(
            ModelDropdown,
            {
              label: "Local Model",
              value: settings.llm.embeddings.localModel || DEFAULT_LOCAL_EMBEDDING_MODEL,
              models: localEmbeddingModels,
              onChange: (value) => {
                updateSetting("llm", "embeddings", { ...settings.llm.embeddings, localModel: value });
              }
            }
          ),
          settings.llm.embeddings.backend === "api" && /* @__PURE__ */ jsxRuntimeExports.jsx(
            ApiKeyInput,
            {
              provider: "openai",
              label: "OpenAI API Key"
            }
          )
        ] })
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { className: "pb-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { className: "text-base", children: "Provider Settings" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Configure default provider and fallback behavior" })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Select,
          {
            id: "default-provider",
            label: "Default Provider",
            description: "Primary LLM provider to use",
            value: settings.llm.defaultProvider,
            onChange: (e) => {
              updateSetting("llm", "defaultProvider", e.target.value);
            },
            options: [
              { value: "claude", label: "Claude (Anthropic)" },
              { value: "gemini", label: "Gemini (Google)" }
            ]
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Checkbox,
          {
            id: "fallback-enabled",
            label: "Enable Fallback",
            description: "Automatically try other providers if the primary fails",
            checked: settings.llm.fallbackEnabled,
            onChange: (e) => {
              updateSetting("llm", "fallbackEnabled", e.target.checked);
            }
          }
        )
      ] })
    ] })
  ] });
}
const AGENT_DISPLAY_INFO = {
  planner: { label: "Planner", icon: "ðŸ§ ", description: "Plans and decomposes tasks" },
  coder: { label: "Coder", icon: "ðŸ’»", description: "Writes and edits code" },
  tester: { label: "Tester", icon: "ðŸ§ª", description: "Creates and runs tests" },
  reviewer: { label: "Reviewer", icon: "ðŸ‘", description: "Reviews code for quality" },
  merger: { label: "Merger", icon: "ðŸ”€", description: "Merges code changes" },
  architect: { label: "Architect", icon: "ðŸ—", description: "Designs system architecture" },
  debugger: { label: "Debugger", icon: "ðŸ›", description: "Diagnoses and fixes issues" },
  documenter: { label: "Documenter", icon: "ðŸ“", description: "Writes documentation" }
};
function AgentModelRow({ agentType, config, onChange, claudeModels, geminiModels }) {
  const info = AGENT_DISPLAY_INFO[agentType];
  const models = config.provider === "claude" ? claudeModels : geminiModels;
  const handleProviderChange = (provider) => {
    const newModels = provider === "claude" ? claudeModels : geminiModels;
    const defaultModel = newModels.find((m) => m.isDefault)?.id || newModels[0]?.id || "";
    onChange(agentType, { provider, model: defaultModel });
  };
  const handleModelChange = (model) => {
    onChange(agentType, { ...config, model });
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", { className: "border-b border-border-default last:border-0", "data-testid": `agent-model-row-${agentType}`, children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "py-3 pr-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-lg", children: info.icon }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-sm font-medium text-text-primary", children: info.label }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "text-xs text-text-tertiary", children: info.description })
      ] })
    ] }) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "py-3 px-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "select",
      {
        value: config.provider,
        onChange: (e) => {
          handleProviderChange(e.target.value);
        },
        className: cn(
          "h-9 w-28 rounded-md border border-border-default bg-bg-dark px-2 py-1 text-sm text-text-primary",
          "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-accent-primary",
          "transition-colors cursor-pointer"
        ),
        "data-testid": `agent-provider-${agentType}`,
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: "claude", children: "Claude" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("option", { value: "gemini", children: "Gemini" })
        ]
      }
    ) }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("td", { className: "py-3 pl-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
      "select",
      {
        value: config.model,
        onChange: (e) => {
          handleModelChange(e.target.value);
        },
        className: cn(
          "h-9 w-full rounded-md border border-border-default bg-bg-dark px-2 py-1 text-sm text-text-primary",
          "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:border-accent-primary",
          "transition-colors cursor-pointer"
        ),
        "data-testid": `agent-model-${agentType}`,
        children: models.map((model) => /* @__PURE__ */ jsxRuntimeExports.jsxs("option", { value: model.id, children: [
          model.name,
          " ",
          model.isDefault ? "(Recommended)" : ""
        ] }, model.id))
      }
    ) })
  ] });
}
function AgentSettings({ settings, updateSetting }) {
  const agentModels = settings.agents.agentModels || DEFAULT_AGENT_MODEL_ASSIGNMENTS;
  const claudeModels = getClaudeModelList();
  const geminiModels = getGeminiModelList();
  const handleAgentModelChange = (agentType, config) => {
    const newAgentModels = {
      ...agentModels,
      [agentType]: config
    };
    updateSetting("agents", "agentModels", newAgentModels);
  };
  const handleResetToDefaults = () => {
    updateSetting("agents", "agentModels", DEFAULT_AGENT_MODEL_ASSIGNMENTS);
  };
  const agentTypes = ["planner", "coder", "tester", "reviewer", "merger", "architect", "debugger", "documenter"];
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", "data-testid": "agents-tab", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(CardTitle, { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Bot, { className: "w-5 h-5 text-accent-primary" }),
          "Agent Model Assignments"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Assign different models to each agent type for optimal performance. Each agent can use a different provider and model." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "overflow-x-auto", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("table", { className: "w-full", "data-testid": "agent-model-table", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("thead", { children: /* @__PURE__ */ jsxRuntimeExports.jsxs("tr", { className: "border-b border-border-default", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-left py-2 pr-4 text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Agent" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-left py-2 px-4 text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Provider" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("th", { className: "text-left py-2 pl-4 text-xs font-medium text-text-secondary uppercase tracking-wider", children: "Model" })
          ] }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("tbody", { children: agentTypes.map((agentType) => /* @__PURE__ */ jsxRuntimeExports.jsx(
            AgentModelRow,
            {
              agentType,
              config: agentModels[agentType],
              onChange: handleAgentModelChange,
              claudeModels,
              geminiModels
            },
            agentType
          )) })
        ] }) }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-4 pt-4 border-t border-border-default", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            variant: "outline",
            size: "sm",
            onClick: handleResetToDefaults,
            "data-testid": "use-recommended-defaults",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(RotateCcw, { className: "w-4 h-4 mr-2" }),
              "Use Recommended Defaults"
            ]
          }
        ) })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Agent Pool Settings" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Configure agent pool capacity and resource limits." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Input,
          {
            id: "max-parallel",
            type: "number",
            min: 1,
            max: 10,
            label: "Max Concurrent Agents",
            description: "Maximum number of agents running simultaneously (1-10)",
            value: settings.agents.maxParallelAgents,
            onChange: (e) => {
              updateSetting("agents", "maxParallelAgents", parseInt(e.target.value) || 1);
            }
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Input,
          {
            id: "qa-iteration-limit",
            type: "number",
            min: 10,
            max: 100,
            label: "QA Iteration Limit",
            description: "Escalate to human after this many QA iterations (10-100)",
            value: settings.agents.qaIterationLimit || 50,
            onChange: (e) => {
              updateSetting("agents", "qaIterationLimit", parseInt(e.target.value) || 50);
            }
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Input,
          {
            id: "task-timeout",
            type: "number",
            min: 1,
            max: 120,
            label: "Task Time Limit (minutes)",
            description: "Split task if it exceeds this duration (1-120)",
            value: settings.agents.taskTimeoutMinutes,
            onChange: (e) => {
              updateSetting("agents", "taskTimeoutMinutes", parseInt(e.target.value) || 30);
            }
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Retry Settings" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Configure retry behavior for failed tasks." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Checkbox,
          {
            id: "auto-retry",
            label: "Auto Retry on Failure",
            description: "Automatically retry tasks when they fail",
            checked: settings.agents.autoRetryEnabled,
            onChange: (e) => {
              updateSetting("agents", "autoRetryEnabled", e.target.checked);
            }
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Input,
          {
            id: "max-retries",
            type: "number",
            min: 0,
            max: 10,
            label: "Max Retries",
            description: "Number of times to retry a failed task (0-10)",
            value: settings.agents.maxRetries,
            onChange: (e) => {
              updateSetting("agents", "maxRetries", parseInt(e.target.value) || 0);
            },
            disabled: !settings.agents.autoRetryEnabled
          }
        )
      ] })
    ] })
  ] });
}
function CheckpointSettings({ settings, updateSetting }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-6", "data-testid": "checkpoints-tab", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Automatic Checkpoints" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Configure automatic checkpoint creation and retention." })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Checkbox,
        {
          id: "auto-checkpoint",
          label: "Enable Auto-Checkpoint",
          description: "Automatically create checkpoints at regular intervals",
          checked: settings.checkpoints.autoCheckpointEnabled,
          onChange: (e) => {
            updateSetting("checkpoints", "autoCheckpointEnabled", e.target.checked);
          }
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Input,
        {
          id: "checkpoint-interval",
          type: "number",
          min: 1,
          max: 120,
          label: "Checkpoint Interval (minutes)",
          description: "How often to create automatic checkpoints",
          value: settings.checkpoints.autoCheckpointIntervalMinutes,
          onChange: (e) => {
            updateSetting("checkpoints", "autoCheckpointIntervalMinutes", parseInt(e.target.value) || 15);
          },
          disabled: !settings.checkpoints.autoCheckpointEnabled
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Input,
        {
          id: "max-checkpoints",
          type: "number",
          min: 1,
          max: 100,
          label: "Max Checkpoints to Keep",
          description: "Older checkpoints will be automatically deleted",
          value: settings.checkpoints.maxCheckpointsToKeep,
          onChange: (e) => {
            updateSetting("checkpoints", "maxCheckpointsToKeep", parseInt(e.target.value) || 10);
          }
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Checkbox,
        {
          id: "checkpoint-on-feature",
          label: "Checkpoint on Feature Complete",
          description: "Automatically create a checkpoint when a feature is marked complete",
          checked: settings.checkpoints.checkpointOnFeatureComplete,
          onChange: (e) => {
            updateSetting("checkpoints", "checkpointOnFeatureComplete", e.target.checked);
          }
        }
      )
    ] })
  ] }) });
}
function UISettings({ settings, updateSetting }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "space-y-6", "data-testid": "ui-tab", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Theme" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Choose your preferred color scheme." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { children: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "grid grid-cols-3 gap-4", children: [
        { value: "light", label: "Light", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Sun, { className: "w-5 h-5" }) },
        { value: "dark", label: "Dark", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Moon, { className: "w-5 h-5" }) },
        { value: "system", label: "System", icon: /* @__PURE__ */ jsxRuntimeExports.jsx(Monitor, { className: "w-5 h-5" }) }
      ].map((theme) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
        "button",
        {
          type: "button",
          onClick: () => {
            updateSetting("ui", "theme", theme.value);
          },
          className: cn(
            "flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition-all",
            settings.ui.theme === theme.value ? "border-accent-primary bg-accent-primary/10" : "border-border-default hover:border-accent-primary/50 bg-bg-dark"
          ),
          children: [
            theme.icon,
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm font-medium", children: theme.label })
          ]
        },
        theme.value
      )) }) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Layout" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Customize the interface layout." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardContent, { className: "space-y-4", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
        Input,
        {
          id: "sidebar-width",
          type: "number",
          min: 200,
          max: 400,
          step: 10,
          label: "Sidebar Width (px)",
          description: "Width of the sidebar in pixels",
          value: settings.ui.sidebarWidth,
          onChange: (e) => {
            updateSetting("ui", "sidebarWidth", parseInt(e.target.value) || 256);
          }
        }
      ) })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Notifications" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Configure notification behavior." })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Checkbox,
          {
            id: "show-notifications",
            label: "Show Notifications",
            description: "Display toast notifications for events",
            checked: settings.ui.showNotifications,
            onChange: (e) => {
              updateSetting("ui", "showNotifications", e.target.checked);
            }
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsx(
          Input,
          {
            id: "notification-duration",
            type: "number",
            min: 1e3,
            max: 3e4,
            step: 500,
            label: "Notification Duration (ms)",
            description: "How long notifications stay visible",
            value: settings.ui.notificationDuration,
            onChange: (e) => {
              updateSetting("ui", "notificationDuration", parseInt(e.target.value) || 5e3);
            },
            disabled: !settings.ui.showNotifications
          }
        )
      ] })
    ] })
  ] });
}
function ProjectSettings({ settings, updateSetting }) {
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-6", "data-testid": "project-tab", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Card, { className: "bg-bg-card border-border-default", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(CardHeader, { children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardTitle, { children: "Project Defaults" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(CardDescription, { children: "Default values used when creating new projects." })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(CardContent, { className: "space-y-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Input,
        {
          id: "default-language",
          label: "Default Language",
          description: "Primary programming language for new projects",
          value: settings.project.defaultLanguage,
          onChange: (e) => {
            updateSetting("project", "defaultLanguage", e.target.value);
          },
          placeholder: "e.g., TypeScript, Python, Go"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Input,
        {
          id: "default-test-framework",
          label: "Default Test Framework",
          description: "Testing framework to use by default",
          value: settings.project.defaultTestFramework,
          onChange: (e) => {
            updateSetting("project", "defaultTestFramework", e.target.value);
          },
          placeholder: "e.g., Jest, Vitest, Pytest"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Input,
        {
          id: "output-directory",
          label: "Output Directory",
          description: "Default directory for generated project files",
          value: settings.project.outputDirectory,
          onChange: (e) => {
            updateSetting("project", "outputDirectory", e.target.value);
          },
          placeholder: "e.g., ~/projects"
        }
      )
    ] })
  ] }) });
}
function SettingsPage() {
  const [activeTab, setActiveTab] = reactExports.useState("llm");
  const [error, setError] = reactExports.useState(null);
  const settings = useSettings();
  const isLoading = useSettingsLoading();
  const isDirty = useSettingsDirty();
  const { loadSettings, updateSetting, saveSettings, discardChanges, resetToDefaults } = useSettingsStore();
  reactExports.useEffect(() => {
    if (!isElectronEnvironment()) {
      setError("Backend not available. Please run in Electron.");
      return;
    }
    void loadSettings();
  }, [loadSettings]);
  const handleSave = async () => {
    if (!isElectronEnvironment()) {
      setError("Cannot save settings - backend not available.");
      return;
    }
    await saveSettings();
  };
  const handleReset = async () => {
    if (window.confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")) {
      if (!isElectronEnvironment()) {
        setError("Cannot reset settings - backend not available.");
        return;
      }
      await resetToDefaults();
    }
  };
  if (error) {
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col h-screen bg-bg-dark", "data-testid": "settings-page-error", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Header, { title: "Settings", icon: Settings2, showBack: true }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center flex-1", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-center gap-3 text-center max-w-md px-4", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { className: "h-12 w-12 text-status-warning" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-lg font-medium text-text-primary", children: "Settings Unavailable" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-text-secondary", children: error })
      ] }) })
    ] });
  }
  if (isLoading || !settings) {
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col h-screen bg-bg-dark", "data-testid": "settings-page-loading", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Header, { title: "Settings", icon: Settings2, showBack: true }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center flex-1", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-center gap-2", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-8 w-8 border-2 border-accent-primary border-t-transparent rounded-full animate-spin" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-sm text-text-secondary", children: "Loading settings..." })
      ] }) })
    ] });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col h-screen bg-bg-dark", "data-testid": "settings-page", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      Header,
      {
        title: "Settings",
        icon: Settings2,
        showBack: true,
        actions: /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center gap-2", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(
          Button,
          {
            variant: "ghost",
            size: "sm",
            onClick: () => {
              void handleReset();
            },
            className: "text-accent-error hover:text-accent-error hover:bg-accent-error/10",
            "data-testid": "reset-defaults-button",
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(RotateCcw, { className: "w-4 h-4 mr-2" }),
              "Reset Defaults"
            ]
          }
        ) })
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-1 overflow-hidden", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("nav", { className: "w-56 border-r border-border-default p-4 space-y-1 flex-shrink-0 bg-bg-card", children: tabs.map((tab) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
        "button",
        {
          onClick: () => {
            setActiveTab(tab.id);
          },
          className: cn(
            "w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-sm transition-all",
            activeTab === tab.id ? "bg-accent-primary text-white font-medium" : "text-text-secondary hover:bg-bg-hover hover:text-text-primary"
          ),
          "data-testid": `tab-${tab.id}`,
          children: [
            tab.icon,
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: tab.label })
          ]
        },
        tab.id
      )) }),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("main", { className: "flex-1 p-6 overflow-y-auto", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mb-6", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xl font-semibold text-text-primary", children: tabs.find((t) => t.id === activeTab)?.label }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm text-text-secondary mt-1", children: tabs.find((t) => t.id === activeTab)?.description })
        ] }),
        activeTab === "llm" && /* @__PURE__ */ jsxRuntimeExports.jsx(LLMProvidersSettings, { settings, updateSetting }),
        activeTab === "agents" && /* @__PURE__ */ jsxRuntimeExports.jsx(AgentSettings, { settings, updateSetting }),
        activeTab === "checkpoints" && /* @__PURE__ */ jsxRuntimeExports.jsx(CheckpointSettings, { settings, updateSetting }),
        activeTab === "ui" && /* @__PURE__ */ jsxRuntimeExports.jsx(UISettings, { settings, updateSetting }),
        activeTab === "project" && /* @__PURE__ */ jsxRuntimeExports.jsx(ProjectSettings, { settings, updateSetting })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("footer", { className: "flex justify-end gap-3 p-4 border-t border-border-default bg-bg-card", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        Button,
        {
          variant: "outline",
          onClick: () => {
            discardChanges();
          },
          disabled: !isDirty,
          "data-testid": "cancel-button",
          children: "Cancel"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        Button,
        {
          onClick: () => {
            void handleSave();
          },
          disabled: !isDirty,
          "data-testid": "save-button",
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Save, { className: "w-4 h-4 mr-2" }),
            "Save Changes"
          ]
        }
      )
    ] })
  ] });
}
export {
  SettingsPage as default
};
