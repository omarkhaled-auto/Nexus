import { c as createLucideIcon, r as reactExports, j as jsxRuntimeExports, a as cn, ai as X, aj as cva, C as CircleAlert, T as TriangleAlert, L as LoaderCircle, p as React, Q as Eye, H as Button, g as ChevronDown, n as ChevronRight, B as Bot, R as RefreshCw } from "./index-Bw-1tXJs.js";
import { H as Header } from "./Header-DOoHfilS.js";
import { I as Info } from "./info-DMtVIDbl.js";
import { C as CircleCheck } from "./circle-check-iu1Uuh9T.js";
import { F as FileText } from "./file-text-D70jb3vW.js";
import { B as Bug, G as GitMerge, P as Play, a as Pause } from "./play-D4L-2aWE.js";
import { T as TestTubeDiagonal, C as CodeXml } from "./test-tube-diagonal-BDh775En.js";
import { Z as Zap } from "./zap-YpptvkLg.js";
import { C as Clock } from "./clock-ODix_OSj.js";
import { T as Trash2 } from "./trash-2-CCPakjnU.js";
import { C as CircleX } from "./circle-x-D11iVmvh.js";
import "./arrow-left-znvwsG6O.js";
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$7 = [
  ["path", { d: "M12 18V5", key: "adv99a" }],
  ["path", { d: "M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4", key: "1e3is1" }],
  ["path", { d: "M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5", key: "1gqd8o" }],
  ["path", { d: "M17.997 5.125a4 4 0 0 1 2.526 5.77", key: "iwvgf7" }],
  ["path", { d: "M18 18a4 4 0 0 0 2-7.464", key: "efp6ie" }],
  ["path", { d: "M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517", key: "1gq6am" }],
  ["path", { d: "M6 18a4 4 0 0 1-2-7.464", key: "k1g0md" }],
  ["path", { d: "M6.003 5.125a4 4 0 0 0-2.526 5.77", key: "q97ue3" }]
];
const Brain = createLucideIcon("brain", __iconNode$7);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$6 = [
  ["path", { d: "M10 12h4", key: "a56b0p" }],
  ["path", { d: "M10 8h4", key: "1sr2af" }],
  ["path", { d: "M14 21v-3a2 2 0 0 0-4 0v3", key: "1rgiei" }],
  [
    "path",
    {
      d: "M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",
      key: "secmi2"
    }
  ],
  ["path", { d: "M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16", key: "16ra0t" }]
];
const Building2 = createLucideIcon("building-2", __iconNode$6);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$5 = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M8 12h8", key: "1wcyev" }]
];
const CircleMinus = createLucideIcon("circle-minus", __iconNode$5);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$4 = [
  [
    "path",
    {
      d: "M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",
      key: "1wthlu"
    }
  ],
  ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }],
  ["path", { d: "m5 16-3 3 3 3", key: "331omg" }],
  ["path", { d: "m9 22 3-3-3-3", key: "lsp7cz" }]
];
const FileCodeCorner = createLucideIcon("file-code-corner", __iconNode$4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$3 = [
  [
    "path",
    {
      d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",
      key: "1oefj6"
    }
  ],
  ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }],
  ["circle", { cx: "11.5", cy: "14.5", r: "2.5", key: "1bq0ko" }],
  ["path", { d: "M13.3 16.3 15 18", key: "2quom7" }]
];
const FileSearch = createLucideIcon("file-search", __iconNode$3);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$2 = [
  ["path", { d: "m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9", key: "1hayfq" }],
  ["path", { d: "m18 15 4-4", key: "16gjal" }],
  [
    "path",
    {
      d: "m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",
      key: "15ts47"
    }
  ]
];
const Hammer = createLucideIcon("hammer", __iconNode$2);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1 = [
  ["line", { x1: "4", x2: "20", y1: "9", y2: "9", key: "4lhtct" }],
  ["line", { x1: "4", x2: "20", y1: "15", y2: "15", key: "vyu0kd" }],
  ["line", { x1: "10", x2: "8", y1: "3", y2: "21", key: "1ggp8o" }],
  ["line", { x1: "16", x2: "14", y1: "3", y2: "21", key: "weycgp" }]
];
const Hash = createLucideIcon("hash", __iconNode$1);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode = [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["path", { d: "M16 3.128a4 4 0 0 1 0 7.744", key: "16gr8j" }],
  ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]
];
const Users = createLucideIcon("users", __iconNode);
const alertVariants = cva(
  [
    "relative w-full rounded-lg border p-4",
    "flex gap-3",
    "[&>svg]:flex-shrink-0"
  ].join(" "),
  {
    variants: {
      variant: {
        default: [
          "bg-bg-card border-border-default",
          "text-text-primary"
        ].join(" "),
        success: [
          "bg-accent-success/10 border-accent-success/50",
          "text-text-primary",
          "[&_.alert-icon]:text-accent-success"
        ].join(" "),
        warning: [
          "bg-accent-warning/10 border-accent-warning/50",
          "text-text-primary",
          "[&_.alert-icon]:text-accent-warning"
        ].join(" "),
        error: [
          "bg-accent-error/10 border-accent-error/50",
          "text-text-primary",
          "[&_.alert-icon]:text-accent-error"
        ].join(" "),
        info: [
          "bg-accent-info/10 border-accent-info/50",
          "text-text-primary",
          "[&_.alert-icon]:text-accent-info"
        ].join(" "),
        destructive: [
          "bg-accent-error/10 border-accent-error",
          "text-accent-error",
          "[&_.alert-icon]:text-accent-error"
        ].join(" ")
      }
    },
    defaultVariants: {
      variant: "default"
    }
  }
);
function getVariantIcon(variant) {
  const iconProps = { className: "h-5 w-5 alert-icon" };
  switch (variant) {
    case "success":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheck, { ...iconProps });
    case "warning":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(TriangleAlert, { ...iconProps });
    case "error":
    case "destructive":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { ...iconProps });
    case "info":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Info, { ...iconProps });
    default:
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Info, { ...iconProps });
  }
}
const Alert = reactExports.forwardRef(
  ({
    className,
    variant = "default",
    title,
    icon,
    showIcon = true,
    dismissible = false,
    onDismiss,
    children,
    "data-testid": testId,
    ...props
  }, ref) => {
    const displayIcon = icon ?? (showIcon ? getVariantIcon(variant) : null);
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "div",
      {
        ref,
        role: "alert",
        className: cn(alertVariants({ variant }), className),
        "data-testid": testId ?? "alert",
        ...props,
        children: [
          displayIcon && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-shrink-0 mt-0.5", children: displayIcon }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1 min-w-0", children: [
            title && /* @__PURE__ */ jsxRuntimeExports.jsx(AlertTitle, { children: title }),
            children && /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDescription, { children })
          ] }),
          dismissible && /* @__PURE__ */ jsxRuntimeExports.jsx(
            "button",
            {
              type: "button",
              onClick: onDismiss,
              className: cn(
                "flex-shrink-0 ml-auto",
                "h-6 w-6 rounded-md",
                "flex items-center justify-center",
                "text-text-tertiary hover:text-text-primary",
                "hover:bg-bg-hover",
                "focus:outline-none focus:ring-2 focus:ring-border-focus",
                "transition-colors"
              ),
              "aria-label": "Dismiss alert",
              "data-testid": "alert-dismiss",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(X, { className: "h-4 w-4" })
            }
          )
        ]
      }
    );
  }
);
Alert.displayName = "Alert";
const AlertTitle = reactExports.forwardRef(
  ({ className, children, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
    "h5",
    {
      ref,
      className: cn("mb-1 font-medium text-sm leading-none tracking-tight", className),
      ...props,
      children
    }
  )
);
AlertTitle.displayName = "AlertTitle";
const AlertDescription = reactExports.forwardRef(
  ({ className, children, ...props }, ref) => /* @__PURE__ */ jsxRuntimeExports.jsx(
    "div",
    {
      ref,
      className: cn("text-sm text-text-secondary [&_p]:leading-relaxed", className),
      ...props,
      children
    }
  )
);
AlertDescription.displayName = "AlertDescription";
const sizeClasses = {
  xs: "h-3 w-3",
  sm: "h-4 w-4",
  md: "h-6 w-6",
  lg: "h-8 w-8",
  xl: "h-12 w-12"
};
const colorClasses = {
  primary: "text-accent-primary",
  secondary: "text-accent-secondary",
  white: "text-white",
  muted: "text-text-tertiary",
  success: "text-accent-success",
  error: "text-accent-error",
  warning: "text-accent-warning",
  inherit: "text-current"
};
function Spinner({
  size = "md",
  color = "muted",
  label,
  className,
  "data-testid": testId,
  ...props
}) {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(
    "div",
    {
      role: "status",
      "aria-label": label ?? "Loading",
      className: cn("inline-flex", className),
      "data-testid": testId ?? "spinner",
      ...props,
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, { className: cn("animate-spin", sizeClasses[size], colorClasses[color]) }),
        label && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "sr-only", children: label })
      ]
    }
  );
}
const colors = {
  // Agent Type Colors
  agent: {
    planner: "#A78BFA",
    coder: "#60A5FA",
    tester: "#34D399",
    reviewer: "#FBBF24",
    merger: "#F472B6",
    architect: "#818CF8",
    debugger: "#FB923C",
    documenter: "#94A3B8"
  }
};
function getAgentLabel(type) {
  const labels = {
    planner: "Planner",
    coder: "Coder",
    tester: "Tester",
    reviewer: "Reviewer",
    merger: "Merger",
    architect: "Architect",
    debugger: "Debugger",
    documenter: "Documenter"
  };
  return labels[type];
}
const AGENT_ICONS = {
  planner: Brain,
  coder: CodeXml,
  tester: TestTubeDiagonal,
  reviewer: Eye,
  merger: GitMerge,
  architect: Building2,
  debugger: Bug,
  documenter: FileText
};
const SIZE_CONFIG$1 = {
  sm: {
    container: "h-6 px-2 gap-1.5",
    icon: 14,
    text: "text-xs",
    dot: "w-1.5 h-1.5"
  },
  md: {
    container: "h-8 px-3 gap-2",
    icon: 16,
    text: "text-sm",
    dot: "w-2 h-2"
  },
  lg: {
    container: "h-10 px-4 gap-2.5",
    icon: 20,
    text: "text-base",
    dot: "w-2.5 h-2.5"
  }
};
const STATUS_COLORS = {
  idle: "bg-text-tertiary",
  working: "bg-accent-info animate-pulse",
  success: "bg-accent-success",
  error: "bg-accent-error",
  pending: "bg-text-muted"
};
const AgentBadge = React.forwardRef(
  ({ type, status, size = "md", showLabel = false, onClick, className, "data-testid": testId }, ref) => {
    const Icon = AGENT_ICONS[type];
    const config = SIZE_CONFIG$1[size];
    const agentColor = colors.agent[type];
    const label = getAgentLabel(type);
    const isInteractive = !!onClick;
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "div",
      {
        ref,
        role: isInteractive ? "button" : void 0,
        tabIndex: isInteractive ? 0 : void 0,
        onClick,
        onKeyDown: isInteractive ? (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            onClick?.();
          }
        } : void 0,
        "data-testid": testId ?? `agent-badge-${type}`,
        "data-agent-type": type,
        "data-agent-status": status,
        className: cn(
          // Base styles
          "inline-flex items-center rounded-full font-medium",
          "transition-all duration-fast",
          config.container,
          config.text,
          // Interactive states
          isInteractive && [
            "cursor-pointer",
            "hover:opacity-90",
            "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-bg-dark",
            "active:scale-95"
          ],
          className
        ),
        style: {
          backgroundColor: `${agentColor}20`,
          // 20% opacity background
          color: agentColor,
          borderColor: agentColor,
          border: `1px solid ${agentColor}40`
          // 40% opacity border
        },
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(Icon, { size: config.icon, className: "flex-shrink-0", strokeWidth: 2 }),
          showLabel && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "whitespace-nowrap", children: label }),
          status && /* @__PURE__ */ jsxRuntimeExports.jsx(
            "span",
            {
              className: cn(
                "rounded-full flex-shrink-0",
                config.dot,
                STATUS_COLORS[status],
                // Add ring effect for working status
                status === "working" && "ring-2 ring-accent-info/30"
              ),
              "aria-label": `Status: ${status}`
            }
          )
        ]
      }
    );
  }
);
AgentBadge.displayName = "AgentBadge";
const progressVariants = cva("relative w-full overflow-hidden rounded-full bg-bg-hover", {
  variants: {
    size: {
      xs: "h-1",
      sm: "h-1.5",
      md: "h-2",
      lg: "h-3",
      xl: "h-4"
    }
  },
  defaultVariants: {
    size: "md"
  }
});
const progressIndicatorVariants = cva(
  "h-full transition-all duration-300 ease-out rounded-full",
  {
    variants: {
      variant: {
        default: "bg-accent-primary",
        success: "bg-accent-success",
        warning: "bg-accent-warning",
        error: "bg-accent-error",
        info: "bg-accent-info",
        secondary: "bg-accent-secondary"
      },
      animated: {
        true: "bg-gradient-to-r from-transparent via-white/20 to-transparent bg-[length:200%_100%] animate-shimmer",
        false: ""
      },
      indeterminate: {
        true: "animate-progress-indeterminate",
        false: ""
      }
    },
    defaultVariants: {
      variant: "default",
      animated: false,
      indeterminate: false
    }
  }
);
const Progress = reactExports.forwardRef(
  ({
    className,
    value = 0,
    max = 100,
    size,
    variant,
    showValue = false,
    formatValue,
    animated = false,
    indeterminate = false,
    indicatorClassName,
    "data-testid": testId,
    ...props
  }, ref) => {
    const clampedValue = Math.min(Math.max(0, value), max);
    const percentage = clampedValue / max * 100;
    const displayValue = formatValue ? formatValue(clampedValue, max) : `${Math.round(percentage)}%`;
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: cn("flex flex-col gap-1", className), ref, ...props, children: [
      showValue && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex justify-between items-center text-xs text-text-secondary", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Progress" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { "data-testid": testId ? `${testId}-value` : "progress-value", children: displayValue })
      ] }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        "div",
        {
          role: "progressbar",
          "aria-valuemin": 0,
          "aria-valuemax": max,
          "aria-valuenow": indeterminate ? void 0 : clampedValue,
          "aria-valuetext": indeterminate ? "Loading..." : displayValue,
          className: cn(progressVariants({ size })),
          "data-testid": testId ?? "progress",
          children: /* @__PURE__ */ jsxRuntimeExports.jsx(
            "div",
            {
              className: cn(
                progressIndicatorVariants({
                  variant,
                  animated: animated && !indeterminate,
                  indeterminate
                }),
                indicatorClassName
              ),
              style: {
                width: indeterminate ? "50%" : `${percentage}%`
              },
              "data-testid": testId ? `${testId}-indicator` : "progress-indicator"
            }
          )
        }
      )
    ] });
  }
);
Progress.displayName = "Progress";
const variantStrokeColors = {
  default: "stroke-accent-primary",
  success: "stroke-accent-success",
  warning: "stroke-accent-warning",
  error: "stroke-accent-error",
  info: "stroke-accent-info",
  secondary: "stroke-accent-secondary"
};
const CircularProgress$1 = reactExports.forwardRef(
  ({
    className,
    value = 0,
    size = 40,
    strokeWidth = 4,
    variant = "default",
    indeterminate = false,
    showValue = false,
    "data-testid": testId,
    ...props
  }, ref) => {
    const radius = (size - strokeWidth) / 2;
    const circumference = radius * 2 * Math.PI;
    const clampedValue = Math.min(Math.max(0, value), 100);
    const offset = circumference - clampedValue / 100 * circumference;
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "div",
      {
        ref,
        className: cn("relative inline-flex items-center justify-center", className),
        style: { width: size, height: size },
        role: "progressbar",
        "aria-valuemin": 0,
        "aria-valuemax": 100,
        "aria-valuenow": indeterminate ? void 0 : clampedValue,
        "data-testid": testId ?? "circular-progress",
        ...props,
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            "svg",
            {
              className: cn(indeterminate && "animate-spin"),
              width: size,
              height: size,
              viewBox: `0 0 ${size} ${size}`,
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "circle",
                  {
                    className: "stroke-bg-hover",
                    strokeWidth,
                    fill: "none",
                    cx: size / 2,
                    cy: size / 2,
                    r: radius
                  }
                ),
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  "circle",
                  {
                    className: cn(
                      "transition-all duration-300 ease-out",
                      variantStrokeColors[variant]
                    ),
                    strokeWidth,
                    strokeDasharray: circumference,
                    strokeDashoffset: indeterminate ? circumference * 0.75 : offset,
                    strokeLinecap: "round",
                    fill: "none",
                    cx: size / 2,
                    cy: size / 2,
                    r: radius,
                    transform: `rotate(-90 ${size / 2} ${size / 2})`
                  }
                )
              ]
            }
          ),
          showValue && !indeterminate && /* @__PURE__ */ jsxRuntimeExports.jsxs(
            "span",
            {
              className: "absolute text-xs font-medium text-text-primary",
              "data-testid": testId ? `${testId}-value` : "circular-progress-value",
              children: [
                Math.round(clampedValue),
                "%"
              ]
            }
          )
        ]
      }
    );
  }
);
CircularProgress$1.displayName = "CircularProgress";
function formatDuration$1(ms) {
  if (ms < 1e3) return `${ms}ms`;
  if (ms < 6e4) return `${(ms / 1e3).toFixed(1)}s`;
  const minutes = Math.floor(ms / 6e4);
  const seconds = Math.floor(ms % 6e4 / 1e3);
  return `${minutes}m ${seconds}s`;
}
function formatTokens(tokens) {
  if (tokens < 1e3) return tokens.toString();
  if (tokens < 1e6) return `${(tokens / 1e3).toFixed(1)}K`;
  return `${(tokens / 1e6).toFixed(1)}M`;
}
function getStatusText(status) {
  const statusTexts = {
    idle: "Idle",
    working: "Working",
    success: "Complete",
    error: "Error",
    pending: "Pending"
  };
  return statusTexts[status];
}
const AgentCard = React.forwardRef(
  ({
    agent,
    selected = false,
    onClick,
    showDetails = false,
    compact = false,
    className,
    "data-testid": testId
  }, ref) => {
    const agentColor = colors.agent[agent.type];
    const isInteractive = !!onClick;
    const hasTask = !!agent.currentTask;
    const hasProgress = hasTask && typeof agent.currentTask?.progress === "number";
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "div",
      {
        ref,
        role: isInteractive ? "button" : "article",
        tabIndex: isInteractive ? 0 : void 0,
        onClick,
        onKeyDown: isInteractive ? (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            onClick?.();
          }
        } : void 0,
        "data-testid": testId ?? `agent-card-${agent.id}`,
        "data-agent-id": agent.id,
        "data-agent-type": agent.type,
        "data-agent-status": agent.status,
        className: cn(
          // Base styles
          "relative rounded-lg border transition-all duration-normal",
          "bg-bg-card border-border-default",
          // Padding based on mode
          compact ? "p-3" : "p-4",
          // Interactive states
          isInteractive && [
            "cursor-pointer",
            "hover:bg-bg-hover hover:border-border-subtle",
            "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-bg-dark",
            "active:scale-[0.99]"
          ],
          // Selected state
          selected && [
            "border-accent-primary bg-bg-hover",
            "ring-1 ring-accent-primary/50",
            // Glow effect
            "shadow-glow-primary"
          ],
          // Working state animation
          agent.status === "working" && "animate-pulse-subtle",
          className
        ),
        style: selected ? {
          borderColor: agentColor,
          boxShadow: `0 0 20px ${agentColor}30`
        } : void 0,
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between gap-3", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3 min-w-0", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(AgentBadge, { type: agent.type, status: agent.status, size: compact ? "sm" : "md" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "min-w-0", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("h4", { className: "font-medium text-text-primary truncate", children: [
                  getAgentLabel(agent.type),
                  " Agent"
                ] }),
                !compact && agent.model && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-text-secondary truncate", children: agent.model })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "div",
              {
                className: cn(
                  "text-xs font-medium px-2 py-1 rounded-full",
                  agent.status === "idle" && "bg-text-tertiary/20 text-text-tertiary",
                  agent.status === "working" && "bg-accent-info/20 text-accent-info",
                  agent.status === "success" && "bg-accent-success/20 text-accent-success",
                  agent.status === "error" && "bg-accent-error/20 text-accent-error",
                  agent.status === "pending" && "bg-text-muted/20 text-text-muted"
                ),
                children: getStatusText(agent.status)
              }
            )
          ] }),
          !compact && hasTask && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mt-3 space-y-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 text-sm text-text-secondary", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(FileCodeCorner, { size: 14, className: "flex-shrink-0 text-text-tertiary" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "truncate", children: agent.currentTask.name })
            ] }),
            hasProgress && /* @__PURE__ */ jsxRuntimeExports.jsx(
              Progress,
              {
                value: agent.currentTask.progress,
                variant: "default",
                size: "sm",
                showValue: true,
                className: "mt-2"
              }
            ),
            agent.currentFile && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 text-xs text-text-tertiary font-mono", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Hash, { size: 12, className: "flex-shrink-0" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "truncate", children: agent.currentFile })
            ] })
          ] }),
          showDetails && !compact && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "mt-4 pt-4 border-t border-border-subtle", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
            agent.iteration && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "div",
                {
                  className: cn(
                    "p-1.5 rounded-md",
                    agent.iteration.current >= agent.iteration.max * 0.8 ? "bg-accent-warning/20 text-accent-warning" : "bg-bg-hover text-text-secondary"
                  ),
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(Zap, { size: 14 })
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-text-tertiary", children: "Iteration" }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-sm font-medium text-text-primary", children: [
                  agent.iteration.current,
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-text-tertiary", children: [
                    "/",
                    agent.iteration.max
                  ] })
                ] })
              ] })
            ] }),
            agent.metrics?.duration !== void 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-1.5 rounded-md bg-bg-hover text-text-secondary", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { size: 14 }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-text-tertiary", children: "Duration" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-text-primary", children: formatDuration$1(agent.metrics.duration) })
              ] })
            ] }),
            agent.metrics?.tokensUsed !== void 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-1.5 rounded-md bg-bg-hover text-text-secondary", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Hash, { size: 14 }) }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-text-tertiary", children: "Tokens" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm font-medium text-text-primary", children: formatTokens(agent.metrics.tokensUsed) })
              ] })
            ] })
          ] }) }),
          agent.status === "working" && /* @__PURE__ */ jsxRuntimeExports.jsx(
            "div",
            {
              className: "absolute bottom-0 left-0 right-0 h-0.5 rounded-b-lg overflow-hidden",
              style: { backgroundColor: `${agentColor}30` },
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                "div",
                {
                  className: "h-full animate-progress-indeterminate",
                  style: { backgroundColor: agentColor }
                }
              )
            }
          )
        ]
      }
    );
  }
);
AgentCard.displayName = "AgentCard";
function parseAnsiLine(line) {
  const cleanLine = line.replace(/\[\d+m/g, "");
  if (line.includes("error") || line.includes("Error") || line.includes("ERROR") || line.includes("failed") || line.includes("Failed")) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-accent-error", children: cleanLine });
  }
  if (line.includes("success") || line.includes("Success") || line.includes("passed") || line.includes("Passed") || line.includes("✓") || line.includes("✔")) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-accent-success", children: cleanLine });
  }
  if (line.includes("warning") || line.includes("Warning") || line.includes("WARN")) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-accent-warning", children: cleanLine });
  }
  if (line.startsWith(">") || line.startsWith("$") || line.startsWith("#")) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-accent-secondary", children: cleanLine });
  }
  if (line.startsWith("//") || line.startsWith("/*") || line.startsWith("*")) {
    return /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-text-tertiary", children: cleanLine });
  }
  return cleanLine;
}
function formatTimestamp() {
  const now = /* @__PURE__ */ new Date();
  return now.toLocaleTimeString("en-US", {
    hour12: false,
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit"
  });
}
const AgentActivity = React.forwardRef(
  ({
    agentId,
    output,
    status,
    autoScroll = true,
    maxHeight = 400,
    showTimestamp = false,
    onClear,
    className,
    "data-testid": testId
  }, ref) => {
    const scrollRef = reactExports.useRef(null);
    const [isPaused, setIsPaused] = reactExports.useState(false);
    const [isAtBottom, setIsAtBottom] = reactExports.useState(true);
    const prevOutputLength = reactExports.useRef(output.length);
    reactExports.useEffect(() => {
      if (autoScroll && !isPaused && isAtBottom && output.length > prevOutputLength.current) {
        scrollRef.current?.scrollTo({
          top: scrollRef.current.scrollHeight,
          behavior: "smooth"
        });
      }
      prevOutputLength.current = output.length;
    }, [output, autoScroll, isPaused, isAtBottom]);
    const handleScroll = reactExports.useCallback((e) => {
      const target = e.currentTarget;
      const threshold = 50;
      const atBottom = target.scrollHeight - target.scrollTop - target.clientHeight < threshold;
      setIsAtBottom(atBottom);
    }, []);
    const scrollToBottom = reactExports.useCallback(() => {
      scrollRef.current?.scrollTo({
        top: scrollRef.current.scrollHeight,
        behavior: "smooth"
      });
      setIsPaused(false);
    }, []);
    const isEmpty = output.length === 0;
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "div",
      {
        ref,
        "data-testid": testId ?? `agent-activity-${agentId}`,
        "data-agent-id": agentId,
        className: cn(
          "flex flex-col rounded-lg border border-border-default bg-bg-dark overflow-hidden",
          className
        ),
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between px-3 py-2 bg-bg-card border-b border-border-default", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-1.5", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-3 h-3 rounded-full bg-accent-error" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-3 h-3 rounded-full bg-accent-warning" }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-3 h-3 rounded-full bg-accent-success" })
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-xs text-text-secondary font-mono ml-2", children: [
                "Agent Output",
                status === "working" && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "inline-flex ml-2", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "animate-pulse", children: "●" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "ml-1 text-accent-success", children: "Live" })
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  variant: "ghost",
                  size: "icon-sm",
                  onClick: () => {
                    setIsPaused(!isPaused);
                  },
                  disabled: isEmpty,
                  title: isPaused ? "Resume auto-scroll" : "Pause auto-scroll",
                  children: isPaused ? /* @__PURE__ */ jsxRuntimeExports.jsx(Play, { size: 14 }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Pause, { size: 14 })
                }
              ),
              onClear && /* @__PURE__ */ jsxRuntimeExports.jsx(
                Button,
                {
                  variant: "ghost",
                  size: "icon-sm",
                  onClick: onClear,
                  disabled: isEmpty,
                  title: "Clear output",
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { size: 14 })
                }
              )
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "div",
            {
              ref: scrollRef,
              onScroll: handleScroll,
              className: "flex-1 overflow-y-auto font-mono text-sm",
              style: {
                maxHeight: typeof maxHeight === "number" ? `${maxHeight}px` : maxHeight,
                minHeight: 100
              },
              children: isEmpty ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center h-full min-h-[100px] text-text-tertiary text-sm", children: [
                status === "idle" && "Agent is idle. Output will appear here when working.",
                status === "working" && "Waiting for output...",
                status === "success" && "Task completed. No output to display.",
                status === "error" && "Agent encountered an error.",
                status === "pending" && "Agent is pending. Waiting to start."
              ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-3 space-y-0.5", children: [
                output.map((line, index) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
                  "div",
                  {
                    className: "flex items-start gap-2 text-text-primary leading-relaxed",
                    "data-testid": `output-line-${index}`,
                    children: [
                      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "flex-shrink-0 w-8 text-right text-text-tertiary select-none", children: index + 1 }),
                      showTimestamp && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex-shrink-0 text-text-tertiary select-none", children: [
                        "[",
                        formatTimestamp(),
                        "]"
                      ] }),
                      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "flex-1 whitespace-pre-wrap break-all", children: parseAnsiLine(line) })
                    ]
                  },
                  index
                )),
                status === "working" && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start gap-2", children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "w-8" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "animate-blink text-accent-primary", children: "▋" })
                ] })
              ] })
            }
          ),
          !isAtBottom && !isEmpty && /* @__PURE__ */ jsxRuntimeExports.jsx(
            "button",
            {
              onClick: scrollToBottom,
              className: cn(
                "absolute bottom-12 right-4 p-2 rounded-full",
                "bg-bg-card border border-border-default",
                "text-text-secondary hover:text-text-primary",
                "shadow-md hover:shadow-lg",
                "transition-all duration-fast",
                "focus:outline-none focus:ring-2 focus:ring-accent-primary"
              ),
              title: "Scroll to bottom",
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(ChevronDown, { size: 16 })
            }
          )
        ]
      }
    );
  }
);
AgentActivity.displayName = "AgentActivity";
const AgentPoolStatus = React.forwardRef(
  ({
    agents,
    maxAgents,
    selectedAgent,
    onSelectAgent,
    compact = false,
    className,
    "data-testid": testId
  }, ref) => {
    const counts = reactExports.useMemo(() => {
      return agents.reduce(
        (acc, agent) => {
          if (agent.status === "working") acc.working++;
          else if (agent.status === "idle") acc.idle++;
          else if (agent.status === "error") acc.error++;
          else if (agent.status === "pending") acc.pending++;
          else if (agent.status === "success") acc.complete++;
          return acc;
        },
        { working: 0, idle: 0, error: 0, pending: 0, complete: 0 }
      );
    }, [agents]);
    const totalActive = agents.length;
    const capacityPercent = totalActive / maxAgents * 100;
    if (compact) {
      return /* @__PURE__ */ jsxRuntimeExports.jsxs(
        "div",
        {
          ref,
          "data-testid": testId ?? "agent-pool-status",
          className: cn(
            "flex items-center gap-4 px-4 py-2 rounded-lg",
            "bg-bg-card border border-border-default",
            className
          ),
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              agents.map((agent) => /* @__PURE__ */ jsxRuntimeExports.jsx(
                AgentBadge,
                {
                  type: agent.type,
                  status: agent.status,
                  size: "sm",
                  onClick: onSelectAgent ? () => {
                    onSelectAgent(agent.id);
                  } : void 0,
                  className: cn(selectedAgent === agent.id && "ring-2 ring-accent-primary")
                },
                agent.id
              )),
              Array.from({ length: maxAgents - agents.length }).map((_, i) => /* @__PURE__ */ jsxRuntimeExports.jsx(
                "div",
                {
                  className: "w-6 h-6 rounded-full border-2 border-dashed border-border-default opacity-30"
                },
                `empty-${i}`
              ))
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3 text-xs text-text-secondary ml-auto", children: [
              counts.working > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center gap-1 text-accent-info", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Zap, { size: 12 }),
                counts.working
              ] }),
              counts.idle > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center gap-1", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Pause, { size: 12 }),
                counts.idle
              ] }),
              counts.error > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "flex items-center gap-1 text-accent-error", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { size: 12 }),
                counts.error
              ] })
            ] })
          ]
        }
      );
    }
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "div",
      {
        ref,
        "data-testid": testId ?? "agent-pool-status",
        className: cn("rounded-lg border border-border-default bg-bg-card", className),
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between px-4 py-3 border-b border-border-default", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { size: 18, className: "text-text-secondary" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "font-medium text-text-primary", children: "Agent Pool" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 text-sm", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-text-secondary", children: [
                totalActive,
                "/",
                maxAgents
              ] }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-16 h-1.5 rounded-full bg-bg-hover overflow-hidden", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                "div",
                {
                  className: cn(
                    "h-full rounded-full transition-all duration-normal",
                    capacityPercent < 50 && "bg-accent-success",
                    capacityPercent >= 50 && capacityPercent < 80 && "bg-accent-warning",
                    capacityPercent >= 80 && "bg-accent-error"
                  ),
                  style: { width: `${capacityPercent}%` }
                }
              ) })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-4 px-4 py-2 border-b border-border-subtle bg-bg-muted/50", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-1.5 text-xs", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "w-2 h-2 rounded-full bg-accent-info animate-pulse" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-text-secondary", children: [
                "Working: ",
                counts.working
              ] })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-1.5 text-xs", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "w-2 h-2 rounded-full bg-text-tertiary" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-text-secondary", children: [
                "Idle: ",
                counts.idle
              ] })
            ] }),
            counts.error > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-1.5 text-xs", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "w-2 h-2 rounded-full bg-accent-error" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-accent-error", children: [
                "Error: ",
                counts.error
              ] })
            ] }),
            counts.complete > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-1.5 text-xs", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "w-2 h-2 rounded-full bg-accent-success" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-text-secondary", children: [
                "Complete: ",
                counts.complete
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-4", children: agents.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center py-8 text-text-tertiary", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(Users, { size: 32, className: "mx-auto mb-2 opacity-50" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-sm", children: "No agents in pool" })
          ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3", children: [
            agents.map((agent) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
              "button",
              {
                onClick: () => onSelectAgent?.(agent.id),
                disabled: !onSelectAgent,
                "data-testid": `pool-agent-${agent.id}`,
                className: cn(
                  "flex flex-col items-center gap-2 p-3 rounded-lg",
                  "border border-border-default bg-bg-dark/50",
                  "transition-all duration-fast",
                  onSelectAgent && [
                    "hover:bg-bg-hover hover:border-border-subtle",
                    "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-bg-card"
                  ],
                  selectedAgent === agent.id && [
                    "border-accent-primary bg-accent-primary/10",
                    "ring-1 ring-accent-primary/50"
                  ]
                ),
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(AgentBadge, { type: agent.type, status: agent.status, size: "md" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center", children: [
                    /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs font-medium text-text-primary", children: getAgentLabel(agent.type) }),
                    agent.taskName && /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-xs text-text-tertiary truncate max-w-[80px]", children: agent.taskName })
                  ] })
                ]
              },
              agent.id
            )),
            Array.from({ length: maxAgents - agents.length }).map((_, i) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
              "div",
              {
                className: cn(
                  "flex flex-col items-center justify-center gap-2 p-3 rounded-lg",
                  "border-2 border-dashed border-border-default/50",
                  "opacity-30"
                ),
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "w-8 h-8 rounded-full border-2 border-dashed border-border-default" }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-text-tertiary", children: "Empty" })
                ]
              },
              `empty-${i}`
            ))
          ] }) })
        ]
      }
    );
  }
);
AgentPoolStatus.displayName = "AgentPoolStatus";
const SIZE_CONFIG = {
  sm: {
    container: "gap-1.5",
    text: "text-xs",
    progress: { size: 20, strokeWidth: 2 },
    icon: 12
  },
  md: {
    container: "gap-2",
    text: "text-sm",
    progress: { size: 28, strokeWidth: 3 },
    icon: 14
  }
};
function CircularProgress({ value, size, strokeWidth, color, trackColor }) {
  const radius = (size - strokeWidth) / 2;
  const circumference = radius * 2 * Math.PI;
  const offset = circumference - value / 100 * circumference;
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("svg", { width: size, height: size, className: "transform -rotate-90", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      "circle",
      {
        cx: size / 2,
        cy: size / 2,
        r: radius,
        fill: "none",
        stroke: trackColor,
        strokeWidth
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      "circle",
      {
        cx: size / 2,
        cy: size / 2,
        r: radius,
        fill: "none",
        stroke: color,
        strokeWidth,
        strokeLinecap: "round",
        strokeDasharray: circumference,
        strokeDashoffset: offset,
        className: "transition-all duration-normal"
      }
    )
  ] });
}
const IterationCounter = React.forwardRef(
  ({ current, max, size = "sm", showProgress = false, className, "data-testid": testId }, ref) => {
    const config = SIZE_CONFIG[size];
    const percent = Math.min(current / max * 100, 100);
    let color;
    let colorClass;
    const trackColor = "var(--color-border-default)";
    let showWarning = false;
    if (percent >= 100) {
      color = "var(--color-accent-error)";
      colorClass = "text-accent-error";
      showWarning = true;
    } else if (percent >= 80) {
      color = "var(--color-accent-warning)";
      colorClass = "text-accent-warning";
      showWarning = true;
    } else if (percent >= 50) {
      color = "var(--color-accent-info)";
      colorClass = "text-accent-info";
    } else {
      color = "var(--color-text-secondary)";
      colorClass = "text-text-secondary";
    }
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "div",
      {
        ref,
        "data-testid": testId ?? "iteration-counter",
        "data-iteration-current": current,
        "data-iteration-max": max,
        className: cn(
          "inline-flex items-center",
          config.container,
          showWarning && "animate-pulse-subtle",
          className
        ),
        role: "status",
        "aria-label": `Iteration ${current} of ${max}`,
        children: [
          showProgress ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              CircularProgress,
              {
                value: percent,
                size: config.progress.size,
                strokeWidth: config.progress.strokeWidth,
                color,
                trackColor
              }
            ),
            showWarning && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 flex items-center justify-center", children: /* @__PURE__ */ jsxRuntimeExports.jsx(
              TriangleAlert,
              {
                size: config.icon - 2,
                className: cn(colorClass, percent >= 100 && "animate-pulse")
              }
            ) })
          ] }) : /* @__PURE__ */ jsxRuntimeExports.jsx(Zap, { size: config.icon, className: colorClass }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: cn("flex items-baseline", config.text), children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: cn("font-medium tabular-nums", colorClass), children: current }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-text-tertiary", children: "/" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-text-tertiary tabular-nums", children: max })
          ] }),
          percent >= 100 && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-accent-error text-xs font-medium ml-1", children: "(Max!)" }),
          percent >= 80 && percent < 100 && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-accent-warning text-xs ml-1", children: "(High)" })
        ]
      }
    );
  }
);
IterationCounter.displayName = "IterationCounter";
const STEP_CONFIG = {
  build: { icon: Hammer, label: "Build", color: "#60A5FA" },
  // blue
  lint: { icon: FileSearch, label: "Lint", color: "#A78BFA" },
  // purple
  test: { icon: TestTubeDiagonal, label: "Test", color: "#34D399" },
  // green
  review: { icon: Eye, label: "Review", color: "#FBBF24" }
  // yellow
};
const STEP_ORDER = ["build", "lint", "test", "review"];
function formatDuration(ms) {
  if (ms < 1e3) return `${ms}ms`;
  if (ms < 6e4) return `${(ms / 1e3).toFixed(1)}s`;
  const minutes = Math.floor(ms / 6e4);
  const seconds = Math.floor(ms % 6e4 / 1e3);
  return `${minutes}m ${seconds}s`;
}
function StatusIcon({ status }) {
  switch (status) {
    case "success":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheck, { size: 16, className: "text-accent-success" });
    case "error":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { size: 16, className: "text-accent-error" });
    case "running":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, { size: 16, className: "text-accent-info animate-spin" });
    case "skipped":
      return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleMinus, { size: 16, className: "text-text-tertiary" });
    case "pending":
    default:
      return /* @__PURE__ */ jsxRuntimeExports.jsx(Clock, { size: 16, className: "text-text-tertiary" });
  }
}
function StepItem({ step, isLast, orientation, onViewLogs }) {
  const config = STEP_CONFIG[step.type];
  const Icon = config.icon;
  const isInteractive = !!onViewLogs && (step.status === "success" || step.status === "error");
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(
    "div",
    {
      className: cn(
        "flex items-center",
        orientation === "horizontal" ? "flex-col gap-2" : "flex-row gap-3"
      ),
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          "button",
          {
            onClick: onViewLogs,
            disabled: !isInteractive,
            "data-testid": `qa-step-${step.type}`,
            className: cn(
              "relative flex items-center justify-center",
              "w-10 h-10 rounded-full",
              "transition-all duration-normal",
              "border-2",
              // Status-based styling
              step.status === "pending" && "border-border-default bg-bg-dark/50",
              step.status === "running" && "border-accent-info bg-accent-info/10",
              step.status === "success" && "border-accent-success bg-accent-success/10",
              step.status === "error" && "border-accent-error bg-accent-error/10",
              step.status === "skipped" && "border-border-subtle bg-bg-muted/30",
              // Interactive states
              isInteractive && [
                "cursor-pointer",
                "hover:scale-105",
                "hover:shadow-md",
                "focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-bg-card"
              ],
              !isInteractive && "cursor-default"
            ),
            title: isInteractive ? `View ${config.label} logs` : void 0,
            children: [
              step.status === "running" ? /* @__PURE__ */ jsxRuntimeExports.jsx(LoaderCircle, { size: 18, className: "animate-spin", style: { color: config.color } }) : /* @__PURE__ */ jsxRuntimeExports.jsx(
                Icon,
                {
                  size: 18,
                  style: {
                    color: step.status === "skipped" || step.status === "pending" ? "var(--color-text-tertiary)" : config.color
                  }
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute -top-1 -right-1", children: /* @__PURE__ */ jsxRuntimeExports.jsx(StatusIcon, { status: step.status }) })
            ]
          }
        ),
        /* @__PURE__ */ jsxRuntimeExports.jsxs(
          "div",
          {
            className: cn(
              "flex flex-col",
              orientation === "horizontal" ? "items-center" : "items-start"
            ),
            children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "span",
                {
                  className: cn(
                    "text-sm font-medium",
                    step.status === "pending" || step.status === "skipped" ? "text-text-tertiary" : "text-text-primary"
                  ),
                  children: config.label
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-xs text-text-tertiary", children: [
                step.status === "running" && "Running...",
                step.status === "pending" && "Pending",
                step.status === "skipped" && "Skipped",
                (step.status === "success" || step.status === "error") && step.duration && formatDuration(step.duration),
                step.status === "error" && !step.duration && "Failed"
              ] }),
              step.type === "test" && step.testCounts && (step.status === "success" || step.status === "error") && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-xs mt-0.5", children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-accent-success", children: step.testCounts.passed }),
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-text-tertiary", children: " / " }),
                step.testCounts.failed > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-accent-error", children: step.testCounts.failed }),
                  /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-text-tertiary", children: " / " })
                ] }),
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-text-tertiary", children: [
                  step.testCounts.skipped,
                  " skip"
                ] })
              ] })
            ]
          }
        ),
        !isLast && /* @__PURE__ */ jsxRuntimeExports.jsx(
          "div",
          {
            className: cn(
              orientation === "horizontal" ? "hidden sm:block w-8 h-0.5" : "hidden",
              "bg-border-default mx-2"
            )
          }
        )
      ]
    }
  );
}
const QAStatusPanel = React.forwardRef(
  ({
    steps,
    iteration,
    maxIterations,
    onViewLogs,
    orientation = "horizontal",
    className,
    "data-testid": testId
  }, ref) => {
    const orderedSteps = STEP_ORDER.map((type) => {
      const existingStep = steps.find((s) => s.type === type);
      return existingStep || { type, status: "pending" };
    });
    const hasError = steps.some((s) => s.status === "error");
    const isRunning = steps.some((s) => s.status === "running");
    const allSuccess = steps.every((s) => s.status === "success" || s.status === "skipped");
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "div",
      {
        ref,
        "data-testid": testId ?? "qa-status-panel",
        className: cn("rounded-lg border border-border-default bg-bg-card", className),
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between px-4 py-3 border-b border-border-default", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium text-text-primary", children: "QA Pipeline" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs(
                "span",
                {
                  className: cn(
                    "text-xs px-2 py-0.5 rounded-full",
                    hasError && "bg-accent-error/20 text-accent-error",
                    isRunning && "bg-accent-info/20 text-accent-info",
                    allSuccess && "bg-accent-success/20 text-accent-success",
                    !hasError && !isRunning && !allSuccess && "bg-text-muted/20 text-text-muted"
                  ),
                  children: [
                    hasError && "Failed",
                    isRunning && "Running",
                    allSuccess && "Passed",
                    !hasError && !isRunning && !allSuccess && "Pending"
                  ]
                }
              )
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(IterationCounter, { current: iteration, max: maxIterations, size: "sm", showProgress: true })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "div",
            {
              className: cn(
                "p-4",
                orientation === "horizontal" && "flex items-center justify-between gap-2 sm:gap-4",
                orientation === "vertical" && "flex flex-col gap-4"
              ),
              children: orderedSteps.map((step, index) => /* @__PURE__ */ jsxRuntimeExports.jsxs(React.Fragment, { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(
                  StepItem,
                  {
                    step,
                    isLast: index === orderedSteps.length - 1,
                    orientation,
                    onViewLogs: onViewLogs ? () => {
                      onViewLogs(step.type);
                    } : void 0
                  }
                ),
                orientation === "horizontal" && index < orderedSteps.length - 1 && /* @__PURE__ */ jsxRuntimeExports.jsx(
                  ChevronRight,
                  {
                    size: 16,
                    className: "text-border-default flex-shrink-0 hidden sm:block"
                  }
                )
              ] }, step.type))
            }
          ),
          hasError && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "px-4 pb-4", children: steps.filter((s) => s.status === "error" && s.error).map((step) => /* @__PURE__ */ jsxRuntimeExports.jsxs(
            "div",
            {
              className: "text-sm text-accent-error bg-accent-error/10 rounded-md px-3 py-2 font-mono",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-semibold", children: [
                  STEP_CONFIG[step.type].label,
                  ":"
                ] }),
                " ",
                step.error
              ]
            },
            step.type
          )) })
        ]
      }
    );
  }
);
QAStatusPanel.displayName = "QAStatusPanel";
function isElectronEnvironment() {
  return typeof window !== "undefined" && "nexusAPI" in window && window.nexusAPI !== void 0;
}
function mapBackendAgent(agent) {
  const a = agent;
  return {
    id: a.id || "unknown",
    type: a.type || "coder",
    status: a.status || "idle",
    model: a.model,
    currentTask: a.currentTask,
    iteration: a.iteration,
    metrics: a.metrics,
    currentFile: a.currentFile
  };
}
function mapQAStatus(qaStatus) {
  const defaultSteps = [
    { type: "build", status: "pending" },
    { type: "lint", status: "pending" },
    { type: "test", status: "pending" },
    { type: "review", status: "pending" }
  ];
  if (!qaStatus) return defaultSteps;
  const qa = qaStatus;
  if (qa.steps && Array.isArray(qa.steps)) {
    return qa.steps.map((step) => {
      const s = step;
      return {
        type: s.type || "build",
        status: s.status || "pending",
        duration: s.duration,
        error: s.error,
        testCounts: s.testCounts
      };
    });
  }
  return defaultSteps;
}
const defaultQASteps = [
  { type: "build", status: "pending" },
  { type: "lint", status: "pending" },
  { type: "test", status: "pending" },
  { type: "review", status: "pending" }
];
function AgentsPage() {
  const [agents, setAgents] = reactExports.useState([]);
  const [qaSteps, setQASteps] = reactExports.useState(defaultQASteps);
  const [iteration, setIteration] = reactExports.useState({ current: 0, max: 50 });
  const [agentOutput, setAgentOutput] = reactExports.useState([]);
  const [selectedAgentId, setSelectedAgentId] = reactExports.useState(null);
  const [isPaused, setIsPaused] = reactExports.useState(false);
  const [isLoading, setIsLoading] = reactExports.useState(true);
  const [error, setError] = reactExports.useState(null);
  const selectedAgent = agents.find((a) => a.id === selectedAgentId);
  const loadRealData = reactExports.useCallback(async () => {
    if (!isElectronEnvironment()) {
      setError("Backend not available. Please run in Electron.");
      setIsLoading(false);
      return;
    }
    setIsLoading(true);
    setError(null);
    try {
      const api = window.nexusAPI;
      const [agentsData, qaStatusData] = await Promise.all([
        api.getAgents(),
        api.getQAStatus()
      ]);
      if (agentsData && Array.isArray(agentsData)) {
        setAgents(agentsData.map(mapBackendAgent));
        if (agentsData.length > 0 && !selectedAgentId) {
          setSelectedAgentId(agentsData[0].id);
        }
      }
      if (qaStatusData) {
        const qa = qaStatusData;
        setQASteps(mapQAStatus(qaStatusData));
        if (qa.iteration !== void 0 && qa.maxIterations !== void 0) {
          setIteration({ current: qa.iteration, max: qa.maxIterations });
        }
      }
      if (selectedAgentId) {
        try {
          const output = await api.getAgentOutput(selectedAgentId);
          if (output && Array.isArray(output)) setAgentOutput(output);
        } catch {
        }
      }
    } catch (err) {
      console.error("Failed to load agent data:", err);
      setError("Failed to load agent data from backend.");
    } finally {
      setIsLoading(false);
    }
  }, [selectedAgentId]);
  const subscribeToEvents = reactExports.useCallback(() => {
    if (!isElectronEnvironment()) return () => {
    };
    const api = window.nexusAPI;
    const unsubscribers = [];
    unsubscribers.push(api.onAgentStatus((status) => {
      const s = status;
      const agentId = s.id || s.agentId;
      if (agentId) {
        setAgents((prev) => prev.map((a) => a.id === agentId ? { ...a, status: s.status || a.status } : a));
      }
    }));
    unsubscribers.push(api.onAgentOutput((data) => {
      if (data.agentId === selectedAgentId) setAgentOutput((prev) => [...prev, data.line]);
    }));
    unsubscribers.push(api.onQAStatusUpdate((status) => {
      setQASteps(mapQAStatus(status));
      const qa = status;
      if (qa.iteration !== void 0 && qa.maxIterations !== void 0) setIteration({ current: qa.iteration, max: qa.maxIterations });
    }));
    return () => {
      unsubscribers.forEach((unsub) => {
        unsub();
      });
    };
  }, [selectedAgentId]);
  reactExports.useEffect(() => {
    void loadRealData();
    const cleanup = subscribeToEvents();
    return cleanup;
  }, [loadRealData, subscribeToEvents]);
  const handlePauseAll = async () => {
    setIsPaused((prev) => !prev);
    if (isElectronEnvironment()) {
      try {
        await window.nexusAPI.pauseExecution(isPaused ? "user_resume" : "user_pause");
      } catch (err) {
        console.error("Failed to pause/resume:", err);
      }
    }
  };
  const handleRefresh = () => {
    void loadRealData();
  };
  const handleAgentSelect = (agentId) => {
    setSelectedAgentId(agentId);
    setAgentOutput([]);
    if (isElectronEnvironment()) {
      void window.nexusAPI.getAgentOutput(agentId).then((output) => {
        if (output && Array.isArray(output)) setAgentOutput(output);
      }).catch(() => {
      });
    }
  };
  const poolAgents = agents.map((a) => ({ id: a.id, type: a.type, status: a.status, taskName: a.currentTask?.name }));
  const refreshIconClass = isLoading ? "w-4 h-4 mr-2 animate-spin" : "w-4 h-4 mr-2";
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col h-screen", "data-testid": "agents-page", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(
      Header,
      {
        title: "Agent Activity",
        subtitle: "Real-time monitoring",
        icon: Bot,
        showBack: true,
        actions: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs(
            Button,
            {
              variant: "outline",
              size: "sm",
              onClick: handleRefresh,
              disabled: isLoading,
              "data-testid": "refresh-agents-button",
              children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(RefreshCw, { className: refreshIconClass }),
                "Refresh"
              ]
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            Button,
            {
              variant: isPaused ? "primary" : "outline",
              size: "sm",
              onClick: handlePauseAll,
              "data-testid": "pause-all-button",
              children: isPaused ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Play, { className: "w-4 h-4 mr-2" }),
                "Resume All"
              ] }) : /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
                /* @__PURE__ */ jsxRuntimeExports.jsx(Pause, { className: "w-4 h-4 mr-2" }),
                "Pause All"
              ] })
            }
          )
        ] })
      }
    ),
    error && /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "px-6 pt-4", children: /* @__PURE__ */ jsxRuntimeExports.jsxs(Alert, { variant: "warning", dismissible: true, onDismiss: () => {
      setError(null);
    }, children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(CircleAlert, { className: "w-4 h-4" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx(AlertDescription, { children: error })
    ] }) }),
    isLoading && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center p-4", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(Spinner, { size: "sm", className: "mr-2" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-text-secondary", children: "Loading agent data..." })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-1 overflow-hidden p-6", children: /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "h-full flex flex-col gap-6", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx(
        AgentPoolStatus,
        {
          agents: poolAgents,
          maxAgents: 10,
          selectedAgent: selectedAgentId ?? void 0,
          onSelectAgent: handleAgentSelect,
          className: "shrink-0",
          "data-testid": "agent-pool-status"
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col gap-4 overflow-auto", "data-testid": "agents-list", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-sm font-semibold text-text-secondary uppercase tracking-wider", children: "Active Agents" }),
          agents.length === 0 ? /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col items-center justify-center py-12 text-center", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "h-12 w-12 rounded-full bg-bg-tertiary flex items-center justify-center mb-3", children: /* @__PURE__ */ jsxRuntimeExports.jsx(Bot, { className: "h-6 w-6 text-text-tertiary" }) }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-text-secondary text-sm", children: "No agents active" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "text-text-tertiary text-xs mt-1", children: "Agents will appear here when a task is being processed" })
          ] }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-3", children: agents.map((agent) => /* @__PURE__ */ jsxRuntimeExports.jsx(
            AgentCard,
            {
              agent,
              selected: agent.id === selectedAgentId,
              onClick: () => {
                handleAgentSelect(agent.id);
              },
              "data-testid": `agent-card-${agent.id}`
            },
            agent.id
          )) })
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex flex-col gap-4 min-h-0", "data-testid": "agent-details", children: selectedAgent ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-sm font-semibold text-text-secondary uppercase tracking-wider shrink-0", children: "Agent Output" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            AgentActivity,
            {
              agentId: selectedAgent.id,
              output: agentOutput,
              status: selectedAgent.status,
              className: "flex-1 min-h-0",
              "data-testid": "agent-activity"
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "shrink-0", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx("h3", { className: "text-sm font-semibold text-text-secondary uppercase tracking-wider mb-3", children: "QA Status" }),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              QAStatusPanel,
              {
                steps: qaSteps,
                iteration: selectedAgent.iteration?.current ?? iteration.current,
                maxIterations: selectedAgent.iteration?.max ?? iteration.max,
                orientation: "horizontal",
                "data-testid": "qa-status-panel"
              }
            )
          ] })
        ] }) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex items-center justify-center h-full text-text-tertiary", children: "Select an agent to view details" }) })
      ] })
    ] }) })
  ] });
}
export {
  AgentsPage as default
};
