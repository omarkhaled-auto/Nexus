---
phase: 05-ui-foundation
plan: 05
type: execute
depends_on: ["05-04"]
files_modified: [src/renderer/src/App.tsx, src/renderer/src/pages/ModeSelectorPage.tsx, src/renderer/src/pages/InterviewPage.tsx, src/renderer/src/pages/KanbanPage.tsx, src/renderer/src/pages/DashboardPage.tsx, src/renderer/src/components/layout/RootLayout.tsx]
---

<objective>
Implement React Router routing and the Mode Selector landing page with two bold cards for Genesis/Evolution.

Purpose: Create the navigation structure and entry point for Nexus that feels modern and inviting.
Output: Working routing between pages, Mode Selector with Cursor-style aesthetic, placeholder pages for Phase 6-8.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-ui-foundation/05-RESEARCH.md
@.planning/phases/05-ui-foundation/05-CONTEXT.md
@.planning/phases/05-ui-foundation/05-04-SUMMARY.md

**Design direction from CONTEXT.md:**
- Cursor-style aesthetic: dark theme, AI-native feel, accent colors
- Two bold mode cards for Genesis/Evolution choice
- Modern and alive, not enterprise software
- Full visual impact for mode selection

**Routing structure from ROADMAP.md:**
- / → Mode Selector (Genesis/Evolution cards)
- /genesis → Interview Page (Phase 6)
- /evolution → Kanban Page (Phase 7)
- /dashboard → Dashboard Page (Phase 8)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Set up React Router with lazy loading</name>
  <files>src/renderer/src/App.tsx, src/renderer/src/components/layout/RootLayout.tsx</files>
  <action>
Install React Router:
```bash
pnpm add react-router
```

Create `src/renderer/src/components/layout/RootLayout.tsx`:
```typescript
import { Outlet } from 'react-router'
import { useEffect } from 'react'
import { uiBackendBridge } from '@/bridges/UIBackendBridge'

export function RootLayout() {
  useEffect(() => {
    // Initialize bridge when app loads
    uiBackendBridge.initialize().catch(console.error)

    return () => {
      uiBackendBridge.cleanup()
    }
  }, [])

  return (
    <div className="min-h-screen bg-background text-foreground">
      <Outlet />
    </div>
  )
}
```

Update `src/renderer/src/App.tsx`:
```typescript
import { createBrowserRouter, RouterProvider } from 'react-router'
import { ThemeProvider } from './components/theme-provider'
import { RootLayout } from './components/layout/RootLayout'
import { ModeSelectorPage } from './pages/ModeSelectorPage'
import { Suspense, lazy } from 'react'

// Lazy load pages that aren't immediately needed
const InterviewPage = lazy(() => import('./pages/InterviewPage'))
const KanbanPage = lazy(() => import('./pages/KanbanPage'))
const DashboardPage = lazy(() => import('./pages/DashboardPage'))

// Loading fallback
function PageLoader() {
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="animate-pulse text-muted-foreground">Loading...</div>
    </div>
  )
}

const router = createBrowserRouter([
  {
    path: '/',
    element: <RootLayout />,
    children: [
      {
        index: true,
        element: <ModeSelectorPage />,
      },
      {
        path: 'genesis',
        element: (
          <Suspense fallback={<PageLoader />}>
            <InterviewPage />
          </Suspense>
        ),
      },
      {
        path: 'evolution',
        element: (
          <Suspense fallback={<PageLoader />}>
            <KanbanPage />
          </Suspense>
        ),
      },
      {
        path: 'dashboard',
        element: (
          <Suspense fallback={<PageLoader />}>
            <DashboardPage />
          </Suspense>
        ),
      },
    ],
  },
])

function App() {
  return (
    <ThemeProvider defaultTheme="dark" storageKey="nexus-theme">
      <RouterProvider router={router} />
    </ThemeProvider>
  )
}

export default App
```

Create placeholder pages as stubs:

**src/renderer/src/pages/InterviewPage.tsx:**
```typescript
export default function InterviewPage() {
  return (
    <div className="p-8">
      <h1 className="text-2xl font-bold">Interview</h1>
      <p className="text-muted-foreground mt-2">Phase 6 will implement this page</p>
    </div>
  )
}
```

**src/renderer/src/pages/KanbanPage.tsx:**
```typescript
export default function KanbanPage() {
  return (
    <div className="p-8">
      <h1 className="text-2xl font-bold">Kanban Board</h1>
      <p className="text-muted-foreground mt-2">Phase 7 will implement this page</p>
    </div>
  )
}
```

**src/renderer/src/pages/DashboardPage.tsx:**
```typescript
export default function DashboardPage() {
  return (
    <div className="p-8">
      <h1 className="text-2xl font-bold">Dashboard</h1>
      <p className="text-muted-foreground mt-2">Phase 8 will implement this page</p>
    </div>
  )
}
```

**Avoid:** Don't implement page content - just routing shell and placeholders.
  </action>
  <verify>
- Navigation between routes works
- Lazy loading shows loading state briefly
- No console errors
  </verify>
  <done>React Router configured, placeholder pages created, lazy loading works</done>
</task>

<task type="auto">
  <name>Task 2: Create Mode Selector page with bold Genesis/Evolution cards</name>
  <files>src/renderer/src/pages/ModeSelectorPage.tsx, src/renderer/src/components/ui/card.tsx</files>
  <action>
Add more shadcn components if needed:
```bash
npx shadcn@latest add card
```

Create `src/renderer/src/pages/ModeSelectorPage.tsx`:
```typescript
import { useNavigate } from 'react-router'
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/components/ui/card'
import { uiBackendBridge } from '@/bridges/UIBackendBridge'
import { useUIStore } from '@/stores/uiStore'
import { Sparkles, GitBranch } from 'lucide-react'

export function ModeSelectorPage() {
  const navigate = useNavigate()
  const isLoading = useUIStore((s) => s.isLoading)

  const handleGenesisClick = async () => {
    try {
      await uiBackendBridge.startGenesis()
      navigate('/genesis')
    } catch (error) {
      console.error('Failed to start Genesis:', error)
    }
  }

  const handleEvolutionClick = async () => {
    // For now, use a placeholder project ID
    // In production, would show project selector first
    try {
      await uiBackendBridge.startEvolution('placeholder-project')
      navigate('/evolution')
    } catch (error) {
      console.error('Failed to start Evolution:', error)
    }
  }

  return (
    <div className="min-h-screen flex flex-col items-center justify-center p-8 bg-gradient-to-b from-background to-background/80">
      {/* Header */}
      <div className="text-center mb-12">
        <h1 className="text-4xl font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/60 bg-clip-text text-transparent">
          Nexus
        </h1>
        <p className="text-muted-foreground mt-2 text-lg">
          Build anything with AI
        </p>
      </div>

      {/* Mode Cards */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl w-full">
        {/* Genesis Card */}
        <Card
          className="relative overflow-hidden cursor-pointer group hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10"
          onClick={handleGenesisClick}
        >
          <div className="absolute inset-0 bg-gradient-to-br from-violet-500/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity" />
          <CardHeader className="pb-4">
            <div className="flex items-center gap-3 mb-2">
              <div className="p-2 rounded-lg bg-violet-500/10 text-violet-500">
                <Sparkles className="h-6 w-6" />
              </div>
              <CardTitle className="text-2xl">Genesis</CardTitle>
            </div>
            <CardDescription className="text-base">
              Start a new project from scratch
            </CardDescription>
          </CardHeader>
          <CardContent>
            <p className="text-muted-foreground text-sm">
              Describe your idea in natural language. Nexus will interview you to understand
              requirements, then build it autonomously.
            </p>
            <div className="mt-4 flex items-center text-xs text-muted-foreground/60">
              <span className="inline-block w-2 h-2 rounded-full bg-violet-500 mr-2" />
              New applications
            </div>
          </CardContent>
        </Card>

        {/* Evolution Card */}
        <Card
          className="relative overflow-hidden cursor-pointer group hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10"
          onClick={handleEvolutionClick}
        >
          <div className="absolute inset-0 bg-gradient-to-br from-emerald-500/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity" />
          <CardHeader className="pb-4">
            <div className="flex items-center gap-3 mb-2">
              <div className="p-2 rounded-lg bg-emerald-500/10 text-emerald-500">
                <GitBranch className="h-6 w-6" />
              </div>
              <CardTitle className="text-2xl">Evolution</CardTitle>
            </div>
            <CardDescription className="text-base">
              Enhance an existing project
            </CardDescription>
          </CardHeader>
          <CardContent>
            <p className="text-muted-foreground text-sm">
              Add features to existing codebases. Manage work visually on a Kanban board
              while AI agents handle implementation.
            </p>
            <div className="mt-4 flex items-center text-xs text-muted-foreground/60">
              <span className="inline-block w-2 h-2 rounded-full bg-emerald-500 mr-2" />
              Existing codebases
            </div>
          </CardContent>
        </Card>
      </div>

      {/* Loading indicator */}
      {isLoading && (
        <div className="mt-8 text-muted-foreground animate-pulse">
          Initializing...
        </div>
      )}

      {/* Footer hint */}
      <p className="mt-12 text-xs text-muted-foreground/50">
        Press a card to begin
      </p>
    </div>
  )
}
```

Install lucide-react for icons:
```bash
pnpm add lucide-react
```

**Design notes:**
- Cursor-style: dark gradients, subtle hover effects, accent colors
- Two prominent cards with visual hierarchy
- Genesis = violet accent (creation)
- Evolution = emerald accent (growth)
- Hover states show gradient overlays
- Clean, uncluttered, focused

**Avoid:** Don't add animations yet (Phase 12). Keep it functional but visually polished.
  </action>
  <verify>
- Mode selector shows two bold cards
- Hover effects work smoothly
- Clicking navigates to correct route
- Dark theme looks good
  </verify>
  <done>Mode selector page with Cursor-style aesthetic complete</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Mode Selector landing page with Genesis/Evolution cards</what-built>
  <how-to-verify>
1. Run: `pnpm run dev:electron`
2. Observe: Dark themed window with "Nexus" header
3. Check: Two cards visible (Genesis with sparkles icon, Evolution with git-branch icon)
4. Hover: Cards should have subtle glow effect and gradient overlay
5. Click Genesis: Should navigate to /genesis (placeholder page)
6. Navigate back: Click browser back or use DevTools to go to /
7. Click Evolution: Should navigate to /evolution (placeholder page)
8. Confirm: Overall feel is modern, AI-native, not enterprise-y
  </how-to-verify>
  <resume-signal>Type "approved" if it looks good, or describe what needs adjustment</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm run dev:electron` shows Mode Selector page
- [ ] Both cards render with correct styling
- [ ] Navigation works to /genesis, /evolution, /dashboard
- [ ] UIBackendBridge initializes on app load
- [ ] No TypeScript errors: `npx tsc --noEmit`
- [ ] Human verified the visual design
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Mode Selector visually matches Cursor-style aesthetic
- Routing works correctly
- Phase 5 complete - UI Foundation ready
  </success_criteria>

<output>
After completion, create `.planning/phases/05-ui-foundation/05-05-SUMMARY.md`:

# Phase 05-05: Routing + Mode Selector Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Phase 5 Complete

UI Foundation ready:
- **05-01**: Electron + Vite scaffold with security
- **05-02**: shadcn/ui + Tailwind + dark theme
- **05-03**: Zustand stores (32 tests)
- **05-04**: IPC + UIBackendBridge (10 tests)
- **05-05**: React Router + Mode Selector

Ready for Phase 6: Interview UI (BUILD-014)
</output>
