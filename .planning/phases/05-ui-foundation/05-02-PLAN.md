---
phase: 05-ui-foundation
plan: 02
type: execute
depends_on: ["05-01"]
files_modified: [src/renderer/src/index.css, src/renderer/src/lib/utils.ts, src/renderer/src/components/ui/*, tailwind.config.js, components.json, postcss.config.js]
---

<objective>
Set up Tailwind CSS and shadcn/ui component library with dark theme as default.

Purpose: Establish the styling foundation and component library that all UI phases will use.
Output: Tailwind configured, shadcn/ui initialized with dark theme, base components ready.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-ui-foundation/05-RESEARCH.md
@.planning/phases/05-ui-foundation/05-CONTEXT.md
@.planning/phases/05-ui-foundation/05-01-SUMMARY.md

**Tech stack:** Electron + Vite from 05-01
**Design direction:** Cursor-style aesthetic, dark theme default, AI-native feel
**Key constraint:** Use shadcn ThemeProvider, not manual CSS class toggling
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install and configure Tailwind CSS for Vite</name>
  <files>tailwind.config.js, postcss.config.js, src/renderer/src/index.css</files>
  <action>
Install Tailwind and dependencies:
```bash
pnpm add -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

Configure `tailwind.config.js`:
```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: 'class',
  content: [
    './src/renderer/index.html',
    './src/renderer/src/**/*.{ts,tsx}',
  ],
  theme: {
    container: {
      center: true,
      padding: '2rem',
      screens: { '2xl': '1400px' },
    },
    extend: {
      // shadcn/ui will add color variables here
    },
  },
  plugins: [require('tailwindcss-animate')],
}
```

Create/update `src/renderer/src/index.css`:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base dark theme - will be enhanced by shadcn */
:root {
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
}

body {
  @apply bg-background text-foreground;
}
```

Import CSS in `src/renderer/src/main.tsx`:
```typescript
import './index.css'
```

Install tailwindcss-animate for shadcn:
```bash
pnpm add -D tailwindcss-animate
```

**Avoid:** Don't use Tailwind JIT mode explicitly - it's default in v3.4+.
  </action>
  <verify>
- `pnpm run dev:electron` shows dark background (not white)
- Tailwind classes work: test with temporary `<div className="text-red-500">Test</div>`
  </verify>
  <done>Tailwind configured, dark theme active, classes working</done>
</task>

<task type="auto">
  <name>Task 2: Initialize shadcn/ui with Vite configuration</name>
  <files>components.json, src/renderer/src/lib/utils.ts</files>
  <action>
Initialize shadcn/ui (interactive prompts):
```bash
cd src/renderer && npx shadcn@latest init
```

When prompted, use these settings:
- Style: Default
- Base color: Zinc (dark-friendly)
- CSS variables: Yes
- Tailwind config: Use existing
- Components location: src/renderer/src/components
- Utils location: src/renderer/src/lib/utils.ts

Or create manually if needed:

Create `components.json` at project root:
```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "default",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.js",
    "css": "src/renderer/src/index.css",
    "baseColor": "zinc",
    "cssVariables": true
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils"
  }
}
```

Create `src/renderer/src/lib/utils.ts`:
```typescript
import { type ClassValue, clsx } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

Install clsx and tailwind-merge:
```bash
pnpm add clsx tailwind-merge
```

**Avoid:** Don't set rsc: true - Electron doesn't use React Server Components.
  </action>
  <verify>
- `components.json` exists with correct paths
- `src/renderer/src/lib/utils.ts` exports `cn` function
- No TypeScript errors
  </verify>
  <done>shadcn/ui initialized, utils ready, Vite alias working</done>
</task>

<task type="auto">
  <name>Task 3: Add shadcn ThemeProvider and essential components</name>
  <files>src/renderer/src/components/theme-provider.tsx, src/renderer/src/components/ui/button.tsx, src/renderer/src/components/ui/card.tsx, src/renderer/src/App.tsx</files>
  <action>
Add shadcn components:
```bash
npx shadcn@latest add button card
```

Create `src/renderer/src/components/theme-provider.tsx` (from 05-RESEARCH.md):
```typescript
import { createContext, useContext, useEffect, useState } from 'react'

type Theme = 'dark' | 'light' | 'system'

interface ThemeProviderProps {
  children: React.ReactNode
  defaultTheme?: Theme
  storageKey?: string
}

interface ThemeProviderState {
  theme: Theme
  setTheme: (theme: Theme) => void
}

const ThemeProviderContext = createContext<ThemeProviderState | undefined>(undefined)

export function ThemeProvider({
  children,
  defaultTheme = 'dark',
  storageKey = 'nexus-theme',
}: ThemeProviderProps) {
  const [theme, setTheme] = useState<Theme>(
    () => (localStorage.getItem(storageKey) as Theme) || defaultTheme
  )

  useEffect(() => {
    const root = window.document.documentElement
    root.classList.remove('light', 'dark')

    if (theme === 'system') {
      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
      root.classList.add(systemTheme)
      return
    }

    root.classList.add(theme)
  }, [theme])

  const value = {
    theme,
    setTheme: (newTheme: Theme) => {
      localStorage.setItem(storageKey, newTheme)
      setTheme(newTheme)
    },
  }

  return (
    <ThemeProviderContext.Provider value={value}>
      {children}
    </ThemeProviderContext.Provider>
  )
}

export const useTheme = () => {
  const context = useContext(ThemeProviderContext)
  if (!context) throw new Error('useTheme must be used within ThemeProvider')
  return context
}
```

Update `src/renderer/src/App.tsx` to use ThemeProvider:
```typescript
import { ThemeProvider } from './components/theme-provider'
import { Button } from './components/ui/button'
import { Card, CardHeader, CardTitle, CardDescription } from './components/ui/card'

function App() {
  return (
    <ThemeProvider defaultTheme="dark" storageKey="nexus-theme">
      <div className="min-h-screen bg-background p-8">
        <h1 className="text-2xl font-bold text-foreground mb-4">Nexus</h1>
        <Card className="max-w-sm">
          <CardHeader>
            <CardTitle>Welcome</CardTitle>
            <CardDescription>UI Foundation ready</CardDescription>
          </CardHeader>
        </Card>
        <Button className="mt-4">Test Button</Button>
      </div>
    </ThemeProvider>
  )
}

export default App
```

**Avoid:** Don't add too many components now - just button and card for verification. Add more as needed.
  </action>
  <verify>
- `pnpm run dev:electron` shows dark-themed card and button
- Button has hover states working
- Theme persists across reload (check localStorage)
  </verify>
  <done>ThemeProvider working, dark theme default, button/card components available</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm run dev:electron` shows dark-themed UI
- [ ] shadcn Button and Card render correctly
- [ ] Theme is persisted in localStorage
- [ ] No TypeScript errors: `npx tsc --noEmit`
- [ ] Tailwind classes work throughout
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Dark theme active by default
- shadcn/ui button and card components working
- ThemeProvider properly configured
  </success_criteria>

<output>
After completion, create `.planning/phases/05-ui-foundation/05-02-SUMMARY.md`:

# Phase 05-02: shadcn/ui + Tailwind Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 05-03-PLAN.md (Zustand stores TDD)
</output>
