---
phase: 01-foundation
plan: 01
type: execute
depends_on: []
files_modified: [package.json, tsconfig.json, eslint.config.js, prettier.config.js, vitest.config.ts, playwright.config.ts, .env.example, .gitignore]
---

<objective>
Initialize the Nexus project with all configuration files and tooling.

Purpose: Establish the foundational project structure with TypeScript strict mode, testing frameworks, and linting - the bedrock all other code depends on.
Output: Working pnpm project with TypeScript, ESLint, Vitest, and Playwright configured.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-CONTEXT.md

**Reference specifications:**
- Master Book Section 4.2 BUILD-001: Project Initialization (4 hours)
- Target: pnpm + TypeScript 5.3+ strict + ESLint flat config + Vitest + Playwright

**Key scripts to include:**
```json
{
  "dev": "tsx watch src/main.ts",
  "build": "tsup src/main.ts",
  "test": "vitest run",
  "test:watch": "vitest",
  "test:coverage": "vitest --coverage",
  "test:e2e": "playwright test",
  "lint": "eslint src/",
  "lint:fix": "eslint src/ --fix",
  "typecheck": "tsc --noEmit",
  "format": "prettier --write .",
  "db:migrate": "tsx src/scripts/migrate.ts",
  "db:status": "tsx src/scripts/db-status.ts",
  "doctor": "tsx src/scripts/doctor.ts"
}
```
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize pnpm project with dependencies</name>
  <files>package.json</files>
  <action>
Initialize pnpm project with `pnpm init`. Add all required dependencies:

**Dependencies:**
- pathe (cross-platform paths)
- fs-extra (file operations)
- chokidar (file watching)
- fast-glob (glob patterns)
- execa (process execution)
- tree-kill (process termination)
- simple-git (git operations)
- better-sqlite3 (SQLite)
- drizzle-orm (ORM)
- zod (validation)
- nanoid (ID generation)

**Dev Dependencies:**
- typescript (5.3+)
- @types/node
- @types/better-sqlite3
- @types/fs-extra
- tsx (TypeScript execution)
- tsup (bundling)
- vitest (testing)
- @vitest/coverage-v8 (coverage)
- playwright (E2E)
- @playwright/test
- eslint (linting)
- @eslint/js
- typescript-eslint
- prettier (formatting)
- drizzle-kit (migrations)

Add scripts section exactly as specified in context. Set type: "module", engines: { node: ">=20" }.

Do NOT use npm or yarn - this project uses pnpm exclusively.
  </action>
  <verify>cat package.json shows all dependencies and scripts</verify>
  <done>package.json exists with all dependencies, scripts, type: "module", and pnpm as package manager</done>
</task>

<task type="auto">
  <name>Task 2: Configure TypeScript and linting</name>
  <files>tsconfig.json, eslint.config.js, prettier.config.js</files>
  <action>
Create TypeScript config with strict mode:
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "lib": ["ES2022"],
    "strict": true,
    "noUncheckedIndexedAccess": true,
    "noImplicitOverride": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "resolveJsonModule": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "outDir": "dist",
    "rootDir": "src",
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "**/*.test.ts"]
}
```

Create ESLint flat config (eslint.config.js) using @eslint/js and typescript-eslint with recommended rules.

Create Prettier config with: semi: true, singleQuote: true, tabWidth: 2, trailingComma: "es5".

Do NOT use legacy .eslintrc format - use flat config only.
  </action>
  <verify>pnpm typecheck passes (empty project), pnpm lint passes</verify>
  <done>TypeScript strict mode enabled, ESLint flat config works, Prettier configured</done>
</task>

<task type="auto">
  <name>Task 3: Configure testing and create directory structure</name>
  <files>vitest.config.ts, playwright.config.ts, .env.example, .gitignore, src/main.ts</files>
  <action>
Create Vitest config:
```typescript
import { defineConfig } from 'vitest/config';
import { resolve } from 'path';

export default defineConfig({
  test: {
    globals: true,
    environment: 'node',
    include: ['src/**/*.test.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: ['node_modules', 'dist', '**/*.test.ts', 'config/**']
    }
  },
  resolve: {
    alias: {
      '@': resolve(__dirname, './src')
    }
  }
});
```

Create Playwright config for E2E tests (basic setup, tests in e2e/ directory).

Create .env.example with placeholders:
```
# API Keys
ANTHROPIC_API_KEY=your_anthropic_key
GOOGLE_AI_API_KEY=your_google_ai_key
OPENAI_API_KEY=your_openai_key

# Database
DATABASE_PATH=./data/nexus.db

# Logging
LOG_LEVEL=info
```

Create .gitignore covering: node_modules, dist, .env, *.db, *.db-journal, .nexus/, coverage/, playwright-report/, test-results/.

Create complete directory structure:
- src/types/
- src/infrastructure/file-system/
- src/infrastructure/process/
- src/infrastructure/git/
- src/persistence/database/
- src/persistence/database/migrations/
- config/prompts/
- e2e/
- data/ (with .gitkeep)

Create minimal src/main.ts that exports a placeholder (just to verify TypeScript compiles).
  </action>
  <verify>pnpm install completes without errors, pnpm typecheck passes, pnpm lint passes</verify>
  <done>Testing frameworks configured, directory structure created, .env.example and .gitignore in place, pnpm install && pnpm typecheck && pnpm lint all pass</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm install` completes without errors
- [ ] `pnpm typecheck` passes
- [ ] `pnpm lint` passes (no files to lint yet is OK)
- [ ] Directory structure matches Master Book specification
- [ ] All config files exist and are valid
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Project structure ready for type definitions (Plan 01-02)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
