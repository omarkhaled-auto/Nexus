---
phase: 06-interview-ui
plan: 03
type: execute
depends_on: ["06-02"]
files_modified:
  - src/renderer/src/components/interview/RequirementsSidebar.tsx
  - src/renderer/src/components/interview/RequirementCard.tsx
  - src/renderer/src/components/interview/CategorySection.tsx
  - src/renderer/src/components/interview/index.ts
---

<objective>
Build the requirements sidebar with real-time capture visualization.

Purpose: Create the right panel showing extracted requirements grouped by category with visual feedback on capture.
Output: Requirements sidebar that updates in real-time as requirements are added.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-interview-ui/06-CONTEXT.md
@.planning/phases/06-interview-ui/06-02-SUMMARY.md
@src/renderer/src/stores/interviewStore.ts
@src/renderer/src/components/ui/card.tsx
@src/renderer/src/index.css

**Tech stack available:** React 19, Zustand, Tailwind v4, shadcn/ui, lucide-react
**Established patterns:** Cursor-style aesthetic, Card component, category-based grouping
**Design context:** Real-time extraction is the "wow" moment, visual highlight on capture
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create RequirementCard and CategorySection components</name>
  <files>src/renderer/src/components/interview/RequirementCard.tsx, src/renderer/src/components/interview/CategorySection.tsx</files>
  <action>
**RequirementCard.tsx:**
- Props: `requirement: Requirement`, `isNew?: boolean`
- Display: requirement text, priority badge, category icon
- Priority badges: Must (red), Should (orange), Could (blue), Won't (gray)
- New highlight: When `isNew` is true, show violet glow animation that fades after 2s
- Compact design - just the essential info, not a full card
- Edit/delete icons on hover (actions fire store methods)
- Use existing Card component as base, minimal padding

Priority badge colors (use Tailwind):
- must: `bg-red-500/20 text-red-400`
- should: `bg-amber-500/20 text-amber-400`
- could: `bg-blue-500/20 text-blue-400`
- wont: `bg-gray-500/20 text-gray-400`

**CategorySection.tsx:**
- Props: `category: RequirementCategory`, `requirements: Requirement[]`, `newRequirementIds: Set<string>`
- Collapsible section with category name header
- Count badge showing number of requirements
- Icon per category:
  - functional: Layers
  - non_functional: Shield
  - technical: Cpu
  - constraint: Lock
  - user_story: User
- Empty state: "No requirements yet" in muted text
- Starts expanded, remembers collapsed state locally

Category display names:
- functional → "Functional"
- non_functional → "Non-Functional"
- technical → "Technical"
- constraint → "Constraints"
- user_story → "User Stories"
  </action>
  <verify>Components render correctly in isolation (can test with mock data in InterviewPage temporarily)</verify>
  <done>RequirementCard shows priority badge, CategorySection groups requirements, icons display</done>
</task>

<task type="auto">
  <name>Task 2: Create RequirementsSidebar with real-time updates</name>
  <files>src/renderer/src/components/interview/RequirementsSidebar.tsx, src/renderer/src/components/interview/index.ts</files>
  <action>
**RequirementsSidebar.tsx:**
- Full-height sidebar with scroll
- Header: "Requirements" with count badge
- Progress indicator: Show stages completed (filled dots) and remaining (empty dots)
- 5 CategorySection components, one per category
- Real-time updates via `useRequirements()` selector
- Track "new" requirements for highlight animation:
  - Keep Set of recently added requirement IDs (last 3 seconds)
  - Use useEffect to clear IDs after timeout
  - Pass `isNew` prop to RequirementCard

Visual hierarchy:
- Header sticky at top
- Categories in logical order: functional, user_story, technical, non_functional, constraint
- Subtle separators between categories
- Empty state when no requirements: centered illustration placeholder + "Requirements will appear here as you describe your project"

New requirement highlight effect:
```typescript
// Track new requirements for highlight
const [newIds, setNewIds] = useState<Set<string>>(new Set())
const prevRequirements = useRef<Requirement[]>([])

useEffect(() => {
  // Find newly added requirements
  const current = requirements
  const prev = prevRequirements.current
  const added = current.filter(r => !prev.find(p => p.id === r.id))

  if (added.length > 0) {
    setNewIds(prev => new Set([...prev, ...added.map(r => r.id)]))
    // Clear after animation
    setTimeout(() => {
      setNewIds(prev => {
        const next = new Set(prev)
        added.forEach(r => next.delete(r.id))
        return next
      })
    }, 2000)
  }

  prevRequirements.current = current
}, [requirements])
```

Update barrel export to include RequirementsSidebar.

Wire up in InterviewPage:
- Pass RequirementsSidebar to the right slot of InterviewLayout
  </action>
  <verify>Navigate to /genesis, sidebar shows with 5 category sections, empty states visible</verify>
  <done>Sidebar renders, categories display, ready for requirement population</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Requirements sidebar with category grouping and highlight effect</what-built>
  <how-to-verify>
    1. Run: pnpm run dev:electron
    2. Navigate to /genesis
    3. Verify: Right panel shows "Requirements" header with count (0)
    4. Verify: 5 category sections visible (may be collapsed)
    5. Verify: Empty state messaging when no requirements
    6. Open browser devtools console
    7. Run: `window.__addTestRequirement()` (we'll add a test helper)
    8. OR: Manually add requirement via store in devtools
    9. Verify: New requirement appears with violet glow
    10. Verify: Glow fades after ~2 seconds
    11. Verify: Priority badge shows correct color
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] RequirementCard displays requirement with priority badge
- [ ] CategorySection groups requirements by category
- [ ] Category icons display correctly
- [ ] RequirementsSidebar shows all 5 categories
- [ ] New requirement highlight animation works
- [ ] Empty state displays when no requirements
- [ ] `npx tsc --noEmit` - no TypeScript errors
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Human verification approved
- Real-time extraction visual feedback works
- Categories properly organized
</success_criteria>

<output>
After completion, create `.planning/phases/06-interview-ui/06-03-SUMMARY.md`
</output>
