---
phase: 06-interview-ui
plan: 01
type: execute
depends_on: []
files_modified:
  - src/renderer/src/stores/interviewStore.ts
  - src/renderer/src/stores/interviewStore.test.ts
  - src/renderer/src/types/interview.ts
  - src/renderer/src/stores/index.ts
---

<objective>
Create interview state management with Zustand store and TypeScript types.

Purpose: Establish the data model for Genesis interview: stages, messages, requirements extraction, and interview state machine.
Output: interviewStore with full TDD coverage, ready for UI consumption.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-interview-ui/06-CONTEXT.md
@.planning/phases/05-ui-foundation/05-03-SUMMARY.md
@src/renderer/src/stores/projectStore.ts
@src/renderer/src/stores/uiStore.ts
@src/renderer/src/stores/index.ts

**Tech stack available:** Zustand v5, TypeScript, Vitest
**Established patterns:** TDD RED-GREEN-REFACTOR, selector hooks, Map for lookups
**Design context:** 7-stage interview progression, real-time requirement capture
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create interview types and store with TDD</name>
  <files>src/renderer/src/types/interview.ts, src/renderer/src/stores/interviewStore.ts, src/renderer/src/stores/interviewStore.test.ts</files>
  <action>
Create interview domain types in `types/interview.ts`:

```typescript
// Interview stages - 7 stage progression
type InterviewStage =
  | 'welcome'
  | 'project_overview'
  | 'technical_requirements'
  | 'features'
  | 'constraints'
  | 'review'
  | 'complete'

// Requirement categories
type RequirementCategory =
  | 'functional'
  | 'non_functional'
  | 'technical'
  | 'constraint'
  | 'user_story'

// Single requirement
interface Requirement {
  id: string
  category: RequirementCategory
  text: string
  priority: 'must' | 'should' | 'could' | 'wont'
  extractedAt: string  // ISO timestamp
  fromMessageId: string  // Links back to source message
}

// Chat message
interface InterviewMessage {
  id: string
  role: 'user' | 'assistant'
  content: string
  timestamp: string
  isStreaming?: boolean  // For streaming responses
}

// Full interview state
interface InterviewState {
  stage: InterviewStage
  messages: InterviewMessage[]
  requirements: Requirement[]
  isInterviewing: boolean
  projectName: string | null
}
```

Write tests FIRST (RED phase), then implement store (GREEN phase):

Store should have:
- State: stage, messages[], requirements[], isInterviewing, projectName
- Actions: setStage, addMessage, updateMessage, addRequirement, updateRequirement, removeRequirement, setProjectName, startInterview, completeInterview, reset
- Selectors: useInterviewStage, useMessages, useRequirements, useRequirementsByCategory, useIsInterviewing, useLatestMessage

Follow TDD discipline:
1. Write 12-15 failing tests covering all actions and selectors
2. Run tests - verify RED (all fail)
3. Implement store - verify GREEN (all pass)
4. Refactor if needed

Use existing patterns from projectStore.ts and uiStore.ts.
  </action>
  <verify>pnpm test -- --testNamePattern "interviewStore" shows all tests passing</verify>
  <done>12+ tests pass, interviewStore exports from barrel, TypeScript compiles clean</done>
</task>

<task type="auto">
  <name>Task 2: Export from stores barrel and verify integration</name>
  <files>src/renderer/src/stores/index.ts</files>
  <action>
Add interviewStore exports to the stores barrel file:

```typescript
// Add to existing exports
export * from './interviewStore'
```

Also export the types from a new types barrel:
- Create `src/renderer/src/types/index.ts` if not exists
- Export interview types

Verify all stores still work together by running full test suite.
  </action>
  <verify>pnpm test -- --testNamePattern "Store" shows all store tests passing (32 existing + 12+ new)</verify>
  <done>45+ total store tests pass, clean barrel exports, no TypeScript errors</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm test -- --testNamePattern "interviewStore"` passes all tests
- [ ] `pnpm test -- --testNamePattern "Store"` passes 44+ tests total
- [ ] `npx tsc --noEmit` - no TypeScript errors
- [ ] interviewStore exports from `@renderer/stores`
- [ ] Interview types properly typed and exported
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- TDD discipline followed (RED → GREEN → REFACTOR)
- Interview state model ready for UI components
</success_criteria>

<output>
After completion, create `.planning/phases/06-interview-ui/06-01-SUMMARY.md`
</output>
