---
phase: 06-interview-ui
plan: 02
type: execute
depends_on: ["06-01"]
files_modified:
  - src/renderer/src/pages/InterviewPage.tsx
  - src/renderer/src/components/interview/InterviewLayout.tsx
  - src/renderer/src/components/interview/ChatPanel.tsx
  - src/renderer/src/components/interview/ChatMessage.tsx
  - src/renderer/src/components/interview/ChatInput.tsx
  - src/renderer/src/components/interview/index.ts
---

<objective>
Build the interview split-screen layout and chat interface components.

Purpose: Create the left panel of the Genesis interview with a natural chat experience.
Output: Functional chat UI with message display, input handling, and streaming support.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-interview-ui/06-CONTEXT.md
@.planning/phases/06-interview-ui/06-01-SUMMARY.md
@src/renderer/src/pages/ModeSelectorPage.tsx
@src/renderer/src/components/ui/card.tsx
@src/renderer/src/components/ui/button.tsx
@src/renderer/src/index.css

**Tech stack available:** React 19, Zustand, Tailwind v4, shadcn/ui, lucide-react
**Established patterns:** Cursor-style aesthetic (dark gradients, violet accents), responsive cards
**Design context:** Split-screen, chat on left, conversational feel not interrogation
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create split-screen InterviewLayout and update InterviewPage</name>
  <files>src/renderer/src/components/interview/InterviewLayout.tsx, src/renderer/src/pages/InterviewPage.tsx</files>
  <action>
Create `InterviewLayout.tsx` as the split-screen container:

```typescript
interface InterviewLayoutProps {
  chatPanel: React.ReactNode
  sidebarPanel: React.ReactNode
}
```

Layout structure:
- Full-height flex container (`h-screen flex`)
- Left panel: 60% width, chat area (`flex-1` or `w-3/5`)
- Divider: subtle vertical border (`border-r border-border`)
- Right panel: 40% width, sidebar (`w-2/5`)
- Responsive: On mobile (<768px), stack vertically with chat on top
- Background: Match existing dark gradient from ModeSelectorPage

Update `InterviewPage.tsx`:
- Import and use InterviewLayout
- Pass ChatPanel to left slot
- Pass placeholder for RequirementsSidebar to right slot
- Connect to interviewStore for state
- Call `startInterview()` on mount if not already interviewing

Follow Cursor-style aesthetic:
- Dark background with subtle gradients
- Violet accent color inherited from Genesis mode
- Clean borders, no harsh separators
  </action>
  <verify>pnpm run dev:electron shows split-screen layout when navigating to /genesis</verify>
  <done>Split layout renders with proper proportions, responsive on resize</done>
</task>

<task type="auto">
  <name>Task 2: Create ChatPanel with messages and input</name>
  <files>src/renderer/src/components/interview/ChatPanel.tsx, src/renderer/src/components/interview/ChatMessage.tsx, src/renderer/src/components/interview/ChatInput.tsx, src/renderer/src/components/interview/index.ts</files>
  <action>
Build the chat interface components:

**ChatMessage.tsx:**
- Props: `message: InterviewMessage`
- User messages: Right-aligned, subtle background (`bg-muted`)
- Assistant messages: Left-aligned, no background
- Streaming indicator: Pulsing cursor or typing dots when `isStreaming: true`
- Timestamp: Muted, small, below message
- Smooth appearance animation (Tailwind animate classes)

**ChatInput.tsx:**
- Textarea that grows with content (max 4 lines, then scroll)
- Send button with Send icon (lucide-react)
- Submit on Enter (Shift+Enter for newline)
- Disabled state when waiting for response
- Props: `onSend: (content: string) => void`, `disabled?: boolean`
- Violet accent on focus ring (matching Genesis theme)

**ChatPanel.tsx:**
- Container with messages list and input at bottom
- Auto-scroll to bottom on new messages
- Use interviewStore: `useMessages()`, `addMessage()`
- Display stage indicator at top (current interview stage)
- Welcome message shown if stage is 'welcome' and no messages yet
- Ref for scroll container with smooth scroll behavior

**index.ts:**
- Barrel export all interview components

Style notes:
- Messages should feel spacious, not cramped
- Use `prose` styling for assistant markdown (if any)
- Input area should have subtle border, dark background
- Send button: primary style, violet accent
  </action>
  <verify>Can type messages and see them appear in chat (local state only - no backend yet)</verify>
  <done>ChatPanel shows messages, input works, auto-scrolls, stage indicator visible</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Split-screen interview layout with chat interface</what-built>
  <how-to-verify>
    1. Run: pnpm run dev:electron
    2. Click Genesis card on landing page
    3. Verify: Split-screen layout (60/40 split)
    4. Verify: Chat panel on left with stage indicator
    5. Verify: Input area at bottom, can type
    6. Type a message and press Enter
    7. Verify: Message appears right-aligned (user style)
    8. Verify: Cursor-style dark theme with violet accents
    9. Resize window to <768px, verify responsive stacking
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Split-screen layout renders correctly
- [ ] Chat messages display with proper styling
- [ ] Input accepts text and sends on Enter
- [ ] Auto-scroll works on new messages
- [ ] Stage indicator shows current stage
- [ ] Responsive layout on mobile widths
- [ ] `npx tsc --noEmit` - no TypeScript errors
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Human verification approved
- Chat feels conversational, not like a form
- Cursor-style aesthetic maintained
</success_criteria>

<output>
After completion, create `.planning/phases/06-interview-ui/06-02-SUMMARY.md`
</output>
